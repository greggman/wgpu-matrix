let n=1e-6;var t={__proto__:null,get EPSILON(){return n},degToRad:function(n){return n*Math.PI/180},euclideanModulo:function(n,t){return(n%t+t)%t},inverseLerp:function(t,r,e){const o=r-t;return Math.abs(r-t)<n?t:(e-t)/o},lerp:function(n,t,r){return n+(t-n)*r},radToDeg:function(n){return 180*n/Math.PI},setEpsilon:function(t){const r=n;return n=t,r}};let r=Float32Array;function e(n){const t=r;return r=n,t}function o(n=0,t=0){const e=new r(2);return void 0!==n&&(e[0]=n,void 0!==t&&(e[1]=t)),e}let u=Float32Array;function a(n){const t=u;return u=n,t}function c(n,t,r){const e=new u(3);return void 0!==n&&(e[0]=n,void 0!==t&&(e[1]=t,void 0!==r&&(e[2]=r))),e}function i(n,t,e){return(e=e||new r(2))[0]=n[0]-t[0],e[1]=n[1]-t[1],e}function s(n,t,e,o){return(o=o||new r(2))[0]=n[0]+e*(t[0]-n[0]),o[1]=n[1]+e*(t[1]-n[1]),o}function f(n,t,e){return(e=e||new r(2))[0]=n[0]*t,e[1]=n[1]*t,e}function h(n,t){return(t=t||new r(2))[0]=1/n[0],t[1]=1/n[1],t}function M(n,t){return n[0]*t[0]+n[1]*t[1]}function l(n){const t=n[0],r=n[1];return Math.sqrt(t*t+r*r)}function w(n){const t=n[0],r=n[1];return t*t+r*r}function d(n,t){const r=n[0]-t[0],e=n[1]-t[1];return Math.sqrt(r*r+e*e)}function m(n,t){const r=n[0]-t[0],e=n[1]-t[1];return r*r+e*e}function v(n,t){t=t||new r(2);const e=n[0],o=n[1],u=Math.sqrt(e*e+o*o);return u>1e-5?(t[0]=e/u,t[1]=o/u):(t[0]=0,t[1]=0),t}function p(n,t){return(t=t||new r(2))[0]=n[0],t[1]=n[1],t}function q(n,t,e){return(e=e||new r(2))[0]=n[0]*t[0],e[1]=n[1]*t[1],e}function b(n,t,e){return(e=e||new r(2))[0]=n[0]/t[0],e[1]=n[1]/t[1],e}function y(n,t,e){return v(n,e=e||new r(2)),f(e,t,e)}var x={__proto__:null,add:function(n,t,e){return(e=e||new r(2))[0]=n[0]+t[0],e[1]=n[1]+t[1],e},addScaled:function(n,t,e,o){return(o=o||new r(2))[0]=n[0]+t[0]*e,o[1]=n[1]+t[1]*e,o},angle:function(n,t){const r=n[0],e=n[1],o=t[0],u=t[1],a=Math.sqrt(r*r+e*e)*Math.sqrt(o*o+u*u),c=a&&M(n,t)/a;return Math.acos(c)},ceil:function(n,t){return(t=t||new r(2))[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t},clamp:function(n,t=0,e=1,o){return(o=o||new r(2))[0]=Math.min(e,Math.max(t,n[0])),o[1]=Math.min(e,Math.max(t,n[1])),o},clone:p,copy:p,create:o,cross:function(n,t,r){r=r||new u(3);const e=n[0]*t[1]-n[1]*t[0];return r[0]=0,r[1]=0,r[2]=e,r},dist:d,distSq:m,distance:d,distanceSq:m,div:b,divScalar:function(n,t,e){return(e=e||new r(2))[0]=n[0]/t,e[1]=n[1]/t,e},divide:b,dot:M,equals:function(n,t){return n[0]===t[0]&&n[1]===t[1]},equalsApproximately:function(t,r){return Math.abs(t[0]-r[0])<n&&Math.abs(t[1]-r[1])<n},floor:function(n,t){return(t=t||new r(2))[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t},fromValues:o,inverse:h,invert:h,len:l,lenSq:w,length:l,lengthSq:w,lerp:s,lerpV:function(n,t,e,o){return(o=o||new r(2))[0]=n[0]+e[0]*(t[0]-n[0]),o[1]=n[1]+e[1]*(t[1]-n[1]),o},max:function(n,t,e){return(e=e||new r(2))[0]=Math.max(n[0],t[0]),e[1]=Math.max(n[1],t[1]),e},midpoint:function(n,t,e){return s(n,t,.5,e=e||new r(2))},min:function(n,t,e){return(e=e||new r(2))[0]=Math.min(n[0],t[0]),e[1]=Math.min(n[1],t[1]),e},mul:q,mulScalar:f,multiply:q,negate:function(n,t){return(t=t||new r(2))[0]=-n[0],t[1]=-n[1],t},normalize:v,random:function(n=1,t){t=t||new r(2);const e=2*Math.random()*Math.PI;return t[0]=Math.cos(e)*n,t[1]=Math.sin(e)*n,t},rotate:function(n,t,e,o){o=o||new r(2);const u=n[0]-t[0],a=n[1]-t[1],c=Math.sin(e),i=Math.cos(e);return o[0]=u*i-a*c+t[0],o[1]=u*c+a*i+t[1],o},round:function(n,t){return(t=t||new r(2))[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t},scale:f,set:function(n,t,e){return(e=e||new r(2))[0]=n,e[1]=t,e},setDefaultType:e,setLength:y,sub:i,subtract:i,transformMat3:function(n,t,e){e=e||new r(2);const o=n[0],u=n[1];return e[0]=t[0]*o+t[4]*u+t[8],e[1]=t[1]*o+t[5]*u+t[9],e},transformMat4:function(n,t,e){e=e||new r(2);const o=n[0],u=n[1];return e[0]=o*t[0]+u*t[4]+t[12],e[1]=o*t[1]+u*t[5]+t[13],e},truncate:function(n,t,e){return e=e||new r(2),l(n)>t?y(n,t,e):p(n,e)},zero:function(n){return(n=n||new r(2))[0]=0,n[1]=0,n}};let g=Float32Array;const S=new Map([[Float32Array,()=>new Float32Array(12)],[Float64Array,()=>new Float64Array(12)],[Array,()=>new Array(12).fill(0)]]);let A=S.get(Float32Array);function _(n){const t=g;return g=n,A=S.get(n),t}function T(n,t){return(t=t||A())[0]=n[0],t[1]=n[1],t[2]=n[2],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[8]=n[8],t[9]=n[9],t[10]=n[10],t}function z(n){return(n=n||A())[0]=1,n[1]=0,n[2]=0,n[4]=0,n[5]=1,n[6]=0,n[8]=0,n[9]=0,n[10]=1,n}function F(n,t){t=t||A();const r=n[0],e=n[1],o=n[2],u=n[4],a=n[5],c=n[6],i=n[8],s=n[9],f=n[10],h=f*a-c*s,M=-f*u+c*i,l=s*u-a*i,w=1/(r*h+e*M+o*l);return t[0]=h*w,t[1]=(-f*e+o*s)*w,t[2]=(c*e-o*a)*w,t[4]=M*w,t[5]=(f*r-o*i)*w,t[6]=(-c*r+o*u)*w,t[8]=l*w,t[9]=(-s*r+e*i)*w,t[10]=(a*r-e*u)*w,t}function k(n,t,r){r=r||A();const e=n[0],o=n[1],u=n[2],a=n[4],c=n[5],i=n[6],s=n[8],f=n[9],h=n[10],M=t[0],l=t[1],w=t[2],d=t[4],m=t[5],v=t[6],p=t[8],q=t[9],b=t[10];return r[0]=e*M+a*l+s*w,r[1]=o*M+c*l+f*w,r[2]=u*M+i*l+h*w,r[4]=e*d+a*m+s*v,r[5]=o*d+c*m+f*v,r[6]=u*d+i*m+h*v,r[8]=e*p+a*q+s*b,r[9]=o*p+c*q+f*b,r[10]=u*p+i*q+h*b,r}var D={__proto__:null,clone:T,copy:T,create:function(n,t,r,e,o,u,a,c,i){const s=A();return s[3]=0,s[7]=0,s[11]=0,void 0!==n&&(s[0]=n,void 0!==t&&(s[1]=t,void 0!==r&&(s[2]=r,void 0!==e&&(s[4]=e,void 0!==o&&(s[5]=o,void 0!==u&&(s[6]=u,void 0!==a&&(s[8]=a,void 0!==c&&(s[9]=c,void 0!==i&&(s[10]=i))))))))),s},determinant:function(n){const t=n[0],r=n[1],e=n[2],o=n[4],u=n[5],a=n[6],c=n[8],i=n[9],s=n[10];return t*(u*s-i*a)-o*(r*s-i*e)+c*(r*a-u*e)},equals:function(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]&&n[4]===t[4]&&n[5]===t[5]&&n[6]===t[6]&&n[8]===t[8]&&n[9]===t[9]&&n[10]===t[10]},equalsApproximately:function(t,r){return Math.abs(t[0]-r[0])<n&&Math.abs(t[1]-r[1])<n&&Math.abs(t[2]-r[2])<n&&Math.abs(t[4]-r[4])<n&&Math.abs(t[5]-r[5])<n&&Math.abs(t[6]-r[6])<n&&Math.abs(t[8]-r[8])<n&&Math.abs(t[9]-r[9])<n&&Math.abs(t[10]-r[10])<n},fromMat4:function(n,t){return(t=t||A())[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=0,t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=0,t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=0,t},fromQuat:function(n,t){t=t||A();const r=n[0],e=n[1],o=n[2],u=n[3],a=r+r,c=e+e,i=o+o,s=r*a,f=e*a,h=e*c,M=o*a,l=o*c,w=o*i,d=u*a,m=u*c,v=u*i;return t[0]=1-h-w,t[1]=f+v,t[2]=M-m,t[3]=0,t[4]=f-v,t[5]=1-s-w,t[6]=l+d,t[7]=0,t[8]=M+m,t[9]=l-d,t[10]=1-s-h,t[11]=0,t},getAxis:function(n,t,r){const e=4*t;return(r=r||o())[0]=n[e+0],r[1]=n[e+1],r},getScaling:function(n,t){t=t||o();const r=n[0],e=n[1],u=n[4],a=n[5];return t[0]=Math.sqrt(r*r+e*e),t[1]=Math.sqrt(u*u+a*a),t},getTranslation:function(n,t){return(t=t||o())[0]=n[8],t[1]=n[9],t},identity:z,inverse:F,invert:F,mul:k,multiply:k,negate:function(n,t){return(t=t||A())[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[4]=-n[4],t[5]=-n[5],t[6]=-n[6],t[8]=-n[8],t[9]=-n[9],t[10]=-n[10],t},rotate:function(n,t,r){r=r||A();const e=n[0],o=n[1],u=n[2],a=n[4],c=n[5],i=n[6],s=Math.cos(t),f=Math.sin(t);return r[0]=s*e+f*a,r[1]=s*o+f*c,r[2]=s*u+f*i,r[4]=s*a-f*e,r[5]=s*c-f*o,r[6]=s*i-f*u,n!==r&&(r[8]=n[8],r[9]=n[9],r[10]=n[10]),r},rotation:function(n,t){t=t||A();const r=Math.cos(n),e=Math.sin(n);return t[0]=r,t[1]=e,t[2]=0,t[4]=-e,t[5]=r,t[6]=0,t[8]=0,t[9]=0,t[10]=1,t},scale:function(n,t,r){r=r||A();const e=t[0],o=t[1];return r[0]=e*n[0],r[1]=e*n[1],r[2]=e*n[2],r[4]=o*n[4],r[5]=o*n[5],r[6]=o*n[6],n!==r&&(r[8]=n[8],r[9]=n[9],r[10]=n[10]),r},scaling:function(n,t){return(t=t||A())[0]=n[0],t[1]=0,t[2]=0,t[4]=0,t[5]=n[1],t[6]=0,t[8]=0,t[9]=0,t[10]=1,t},set:function(n,t,r,e,o,u,a,c,i,s){return(s=s||A())[0]=n,s[1]=t,s[2]=r,s[3]=0,s[4]=e,s[5]=o,s[6]=u,s[7]=0,s[8]=a,s[9]=c,s[10]=i,s[11]=0,s},setAxis:function(n,t,r,e){e!==n&&(e=T(n,e));const o=4*r;return e[o+0]=t[0],e[o+1]=t[1],e},setDefaultType:_,setTranslation:function(n,t,r){return n!==(r=r||z())&&(r[0]=n[0],r[1]=n[1],r[2]=n[2],r[4]=n[4],r[5]=n[5],r[6]=n[6]),r[8]=t[0],r[9]=t[1],r[10]=1,r},translate:function(n,t,r){r=r||A();const e=t[0],o=t[1],u=n[0],a=n[1],c=n[2],i=n[4],s=n[5],f=n[6],h=n[8],M=n[9],l=n[10];return n!==r&&(r[0]=u,r[1]=a,r[2]=c,r[4]=i,r[5]=s,r[6]=f),r[8]=u*e+i*o+h,r[9]=a*e+s*o+M,r[10]=c*e+f*o+l,r},translation:function(n,t){return(t=t||A())[0]=1,t[1]=0,t[2]=0,t[4]=0,t[5]=1,t[6]=0,t[8]=n[0],t[9]=n[1],t[10]=1,t},transpose:function(n,t){if((t=t||A())===n){let r;return r=n[1],n[1]=n[4],n[4]=r,r=n[2],n[2]=n[8],n[8]=r,r=n[6],n[6]=n[9],n[9]=r,t}const r=n[0],e=n[1],o=n[2],u=n[4],a=n[5],c=n[6],i=n[8],s=n[9],f=n[10];return t[0]=r,t[1]=u,t[2]=i,t[4]=e,t[5]=a,t[6]=s,t[8]=o,t[9]=c,t[10]=f,t},uniformScale:function(n,t,r){return(r=r||A())[0]=t*n[0],r[1]=t*n[1],r[2]=t*n[2],r[4]=t*n[4],r[5]=t*n[5],r[6]=t*n[6],n!==r&&(r[8]=n[8],r[9]=n[9],r[10]=n[10]),r},uniformScaling:function(n,t){return(t=t||A())[0]=n,t[1]=0,t[2]=0,t[4]=0,t[5]=n,t[6]=0,t[8]=0,t[9]=0,t[10]=1,t}};function I(n,t,r){return(r=r||new u(3))[0]=n[0]-t[0],r[1]=n[1]-t[1],r[2]=n[2]-t[2],r}function P(n,t,r,e){return(e=e||new u(3))[0]=n[0]+r*(t[0]-n[0]),e[1]=n[1]+r*(t[1]-n[1]),e[2]=n[2]+r*(t[2]-n[2]),e}function V(n,t,r){return(r=r||new u(3))[0]=n[0]*t,r[1]=n[1]*t,r[2]=n[2]*t,r}function Z(n,t){return(t=t||new u(3))[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t}function L(n,t,r){r=r||new u(3);const e=n[2]*t[0]-n[0]*t[2],o=n[0]*t[1]-n[1]*t[0];return r[0]=n[1]*t[2]-n[2]*t[1],r[1]=e,r[2]=o,r}function R(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function E(n){const t=n[0],r=n[1],e=n[2];return Math.sqrt(t*t+r*r+e*e)}const X=E;function Y(n){const t=n[0],r=n[1],e=n[2];return t*t+r*r+e*e}function Q(n,t){const r=n[0]-t[0],e=n[1]-t[1],o=n[2]-t[2];return Math.sqrt(r*r+e*e+o*o)}function N(n,t){const r=n[0]-t[0],e=n[1]-t[1],o=n[2]-t[2];return r*r+e*e+o*o}function U(n,t){t=t||new u(3);const r=n[0],e=n[1],o=n[2],a=Math.sqrt(r*r+e*e+o*o);return a>1e-5?(t[0]=r/a,t[1]=e/a,t[2]=o/a):(t[0]=0,t[1]=0,t[2]=0),t}function j(n,t){return(t=t||new u(3))[0]=n[0],t[1]=n[1],t[2]=n[2],t}function O(n,t,r){return(r=r||new u(3))[0]=n[0]*t[0],r[1]=n[1]*t[1],r[2]=n[2]*t[2],r}function $(n,t,r){return(r=r||new u(3))[0]=n[0]/t[0],r[1]=n[1]/t[1],r[2]=n[2]/t[2],r}function B(n,t,r){return U(n,r=r||new u(3)),V(r,t,r)}var C={__proto__:null,add:function(n,t,r){return(r=r||new u(3))[0]=n[0]+t[0],r[1]=n[1]+t[1],r[2]=n[2]+t[2],r},addScaled:function(n,t,r,e){return(e=e||new u(3))[0]=n[0]+t[0]*r,e[1]=n[1]+t[1]*r,e[2]=n[2]+t[2]*r,e},angle:function(n,t){const r=n[0],e=n[1],o=n[2],u=t[0],a=t[1],c=t[2],i=Math.sqrt(r*r+e*e+o*o)*Math.sqrt(u*u+a*a+c*c),s=i&&R(n,t)/i;return Math.acos(s)},ceil:function(n,t){return(t=t||new u(3))[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t},clamp:function(n,t=0,r=1,e){return(e=e||new u(3))[0]=Math.min(r,Math.max(t,n[0])),e[1]=Math.min(r,Math.max(t,n[1])),e[2]=Math.min(r,Math.max(t,n[2])),e},clone:j,copy:j,create:c,cross:L,dist:Q,distSq:N,distance:Q,distanceSq:N,div:$,divScalar:function(n,t,r){return(r=r||new u(3))[0]=n[0]/t,r[1]=n[1]/t,r[2]=n[2]/t,r},divide:$,dot:R,equals:function(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]},equalsApproximately:function(t,r){return Math.abs(t[0]-r[0])<n&&Math.abs(t[1]-r[1])<n&&Math.abs(t[2]-r[2])<n},floor:function(n,t){return(t=t||new u(3))[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t},fromValues:c,getAxis:function(n,t,r){const e=4*t;return(r=r||new u(3))[0]=n[e+0],r[1]=n[e+1],r[2]=n[e+2],r},getScaling:function(n,t){t=t||new u(3);const r=n[0],e=n[1],o=n[2],a=n[4],c=n[5],i=n[6],s=n[8],f=n[9],h=n[10];return t[0]=Math.sqrt(r*r+e*e+o*o),t[1]=Math.sqrt(a*a+c*c+i*i),t[2]=Math.sqrt(s*s+f*f+h*h),t},getTranslation:function(n,t){return(t=t||new u(3))[0]=n[12],t[1]=n[13],t[2]=n[14],t},inverse:Z,invert:Z,len:X,lenSq:Y,length:E,lengthSq:Y,lerp:P,lerpV:function(n,t,r,e){return(e=e||new u(3))[0]=n[0]+r[0]*(t[0]-n[0]),e[1]=n[1]+r[1]*(t[1]-n[1]),e[2]=n[2]+r[2]*(t[2]-n[2]),e},max:function(n,t,r){return(r=r||new u(3))[0]=Math.max(n[0],t[0]),r[1]=Math.max(n[1],t[1]),r[2]=Math.max(n[2],t[2]),r},midpoint:function(n,t,r){return P(n,t,.5,r=r||new u(3))},min:function(n,t,r){return(r=r||new u(3))[0]=Math.min(n[0],t[0]),r[1]=Math.min(n[1],t[1]),r[2]=Math.min(n[2],t[2]),r},mul:O,mulScalar:V,multiply:O,negate:function(n,t){return(t=t||new u(3))[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t},normalize:U,random:function(n=1,t){t=t||new u(3);const r=2*Math.random()*Math.PI,e=2*Math.random()-1,o=Math.sqrt(1-e*e)*n;return t[0]=Math.cos(r)*o,t[1]=Math.sin(r)*o,t[2]=e*n,t},rotateX:function(n,t,r,e){e=e||new u(3);const o=[],a=[];return o[0]=n[0]-t[0],o[1]=n[1]-t[1],o[2]=n[2]-t[2],a[0]=o[0],a[1]=o[1]*Math.cos(r)-o[2]*Math.sin(r),a[2]=o[1]*Math.sin(r)+o[2]*Math.cos(r),e[0]=a[0]+t[0],e[1]=a[1]+t[1],e[2]=a[2]+t[2],e},rotateY:function(n,t,r,e){e=e||new u(3);const o=[],a=[];return o[0]=n[0]-t[0],o[1]=n[1]-t[1],o[2]=n[2]-t[2],a[0]=o[2]*Math.sin(r)+o[0]*Math.cos(r),a[1]=o[1],a[2]=o[2]*Math.cos(r)-o[0]*Math.sin(r),e[0]=a[0]+t[0],e[1]=a[1]+t[1],e[2]=a[2]+t[2],e},rotateZ:function(n,t,r,e){e=e||new u(3);const o=[],a=[];return o[0]=n[0]-t[0],o[1]=n[1]-t[1],o[2]=n[2]-t[2],a[0]=o[0]*Math.cos(r)-o[1]*Math.sin(r),a[1]=o[0]*Math.sin(r)+o[1]*Math.cos(r),a[2]=o[2],e[0]=a[0]+t[0],e[1]=a[1]+t[1],e[2]=a[2]+t[2],e},round:function(n,t){return(t=t||new u(3))[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t},scale:V,set:function(n,t,r,e){return(e=e||new u(3))[0]=n,e[1]=t,e[2]=r,e},setDefaultType:a,setLength:B,sub:I,subtract:I,transformMat3:function(n,t,r){r=r||new u(3);const e=n[0],o=n[1],a=n[2];return r[0]=e*t[0]+o*t[4]+a*t[8],r[1]=e*t[1]+o*t[5]+a*t[9],r[2]=e*t[2]+o*t[6]+a*t[10],r},transformMat4:function(n,t,r){r=r||new u(3);const e=n[0],o=n[1],a=n[2],c=t[3]*e+t[7]*o+t[11]*a+t[15]||1;return r[0]=(t[0]*e+t[4]*o+t[8]*a+t[12])/c,r[1]=(t[1]*e+t[5]*o+t[9]*a+t[13])/c,r[2]=(t[2]*e+t[6]*o+t[10]*a+t[14])/c,r},transformMat4Upper3x3:function(n,t,r){r=r||new u(3);const e=n[0],o=n[1],a=n[2];return r[0]=e*t[0]+o*t[4]+a*t[8],r[1]=e*t[1]+o*t[5]+a*t[9],r[2]=e*t[2]+o*t[6]+a*t[10],r},transformQuat:function(n,t,r){r=r||new u(3);const e=t[0],o=t[1],a=t[2],c=2*t[3],i=n[0],s=n[1],f=n[2],h=o*f-a*s,M=a*i-e*f,l=e*s-o*i;return r[0]=i+h*c+2*(o*l-a*M),r[1]=s+M*c+2*(a*h-e*l),r[2]=f+l*c+2*(e*M-o*h),r},truncate:function(n,t,r){return r=r||new u(3),E(n)>t?B(n,t,r):j(n,r)},zero:function(n){return(n=n||new u(3))[0]=0,n[1]=0,n[2]=0,n}};let G=Float32Array;function H(n){const t=G;return G=n,t}function J(n,t){return(t=t||new G(16))[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function K(n){return(n=n||new G(16))[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function W(n,t){t=t||new G(16);const r=n[0],e=n[1],o=n[2],u=n[3],a=n[4],c=n[5],i=n[6],s=n[7],f=n[8],h=n[9],M=n[10],l=n[11],w=n[12],d=n[13],m=n[14],v=n[15],p=M*v,q=m*l,b=i*v,y=m*s,x=i*l,g=M*s,S=o*v,A=m*u,_=o*l,T=M*u,z=o*s,F=i*u,k=f*d,D=w*h,I=a*d,P=w*c,V=a*h,Z=f*c,L=r*d,R=w*e,E=r*h,X=f*e,Y=r*c,Q=a*e,N=p*c+y*h+x*d-(q*c+b*h+g*d),U=q*e+S*h+T*d-(p*e+A*h+_*d),j=b*e+A*c+z*d-(y*e+S*c+F*d),O=g*e+_*c+F*h-(x*e+T*c+z*h),$=1/(r*N+a*U+f*j+w*O);return t[0]=$*N,t[1]=$*U,t[2]=$*j,t[3]=$*O,t[4]=$*(q*a+b*f+g*w-(p*a+y*f+x*w)),t[5]=$*(p*r+A*f+_*w-(q*r+S*f+T*w)),t[6]=$*(y*r+S*a+F*w-(b*r+A*a+z*w)),t[7]=$*(x*r+T*a+z*f-(g*r+_*a+F*f)),t[8]=$*(k*s+P*l+V*v-(D*s+I*l+Z*v)),t[9]=$*(D*u+L*l+X*v-(k*u+R*l+E*v)),t[10]=$*(I*u+R*s+Y*v-(P*u+L*s+Q*v)),t[11]=$*(Z*u+E*s+Q*l-(V*u+X*s+Y*l)),t[12]=$*(I*M+Z*m+D*i-(V*m+k*i+P*M)),t[13]=$*(E*m+k*o+R*M-(L*M+X*m+D*o)),t[14]=$*(L*i+Q*m+P*o-(Y*m+I*o+R*i)),t[15]=$*(Y*M+V*o+X*i-(E*i+Q*M+Z*o)),t}function nn(n,t,r){r=r||new G(16);const e=n[0],o=n[1],u=n[2],a=n[3],c=n[4],i=n[5],s=n[6],f=n[7],h=n[8],M=n[9],l=n[10],w=n[11],d=n[12],m=n[13],v=n[14],p=n[15],q=t[0],b=t[1],y=t[2],x=t[3],g=t[4],S=t[5],A=t[6],_=t[7],T=t[8],z=t[9],F=t[10],k=t[11],D=t[12],I=t[13],P=t[14],V=t[15];return r[0]=e*q+c*b+h*y+d*x,r[1]=o*q+i*b+M*y+m*x,r[2]=u*q+s*b+l*y+v*x,r[3]=a*q+f*b+w*y+p*x,r[4]=e*g+c*S+h*A+d*_,r[5]=o*g+i*S+M*A+m*_,r[6]=u*g+s*S+l*A+v*_,r[7]=a*g+f*S+w*A+p*_,r[8]=e*T+c*z+h*F+d*k,r[9]=o*T+i*z+M*F+m*k,r[10]=u*T+s*z+l*F+v*k,r[11]=a*T+f*z+w*F+p*k,r[12]=e*D+c*I+h*P+d*V,r[13]=o*D+i*I+M*P+m*V,r[14]=u*D+s*I+l*P+v*V,r[15]=a*D+f*I+w*P+p*V,r}let tn,rn,en;function on(n,t,r){r=r||new G(16);let e=n[0],o=n[1],u=n[2];const a=Math.sqrt(e*e+o*o+u*u);e/=a,o/=a,u/=a;const c=e*e,i=o*o,s=u*u,f=Math.cos(t),h=Math.sin(t),M=1-f;return r[0]=c+(1-c)*f,r[1]=e*o*M+u*h,r[2]=e*u*M-o*h,r[3]=0,r[4]=e*o*M-u*h,r[5]=i+(1-i)*f,r[6]=o*u*M+e*h,r[7]=0,r[8]=e*u*M+o*h,r[9]=o*u*M-e*h,r[10]=s+(1-s)*f,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function un(n,t,r,e){e=e||new G(16);let o=t[0],u=t[1],a=t[2];const c=Math.sqrt(o*o+u*u+a*a);o/=c,u/=c,a/=c;const i=o*o,s=u*u,f=a*a,h=Math.cos(r),M=Math.sin(r),l=1-h,w=i+(1-i)*h,d=o*u*l+a*M,m=o*a*l-u*M,v=o*u*l-a*M,p=s+(1-s)*h,q=u*a*l+o*M,b=o*a*l+u*M,y=u*a*l-o*M,x=f+(1-f)*h,g=n[0],S=n[1],A=n[2],_=n[3],T=n[4],z=n[5],F=n[6],k=n[7],D=n[8],I=n[9],P=n[10],V=n[11];return e[0]=w*g+d*T+m*D,e[1]=w*S+d*z+m*I,e[2]=w*A+d*F+m*P,e[3]=w*_+d*k+m*V,e[4]=v*g+p*T+q*D,e[5]=v*S+p*z+q*I,e[6]=v*A+p*F+q*P,e[7]=v*_+p*k+q*V,e[8]=b*g+y*T+x*D,e[9]=b*S+y*z+x*I,e[10]=b*A+y*F+x*P,e[11]=b*_+y*k+x*V,n!==e&&(e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e}var an={__proto__:null,aim:function(n,t,r,e){return e=e||new G(16),tn=tn||c(),rn=rn||c(),en=en||c(),U(I(t,n,en),en),U(L(r,en,tn),tn),U(L(en,tn,rn),rn),e[0]=tn[0],e[1]=tn[1],e[2]=tn[2],e[3]=0,e[4]=rn[0],e[5]=rn[1],e[6]=rn[2],e[7]=0,e[8]=en[0],e[9]=en[1],e[10]=en[2],e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},axisRotate:un,axisRotation:on,cameraAim:function(n,t,r,e){return e=e||new G(16),tn=tn||c(),rn=rn||c(),en=en||c(),U(I(n,t,en),en),U(L(r,en,tn),tn),U(L(en,tn,rn),rn),e[0]=tn[0],e[1]=tn[1],e[2]=tn[2],e[3]=0,e[4]=rn[0],e[5]=rn[1],e[6]=rn[2],e[7]=0,e[8]=en[0],e[9]=en[1],e[10]=en[2],e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},clone:J,copy:J,create:function(n,t,r,e,o,u,a,c,i,s,f,h,M,l,w,d){const m=new G(16);return void 0!==n&&(m[0]=n,void 0!==t&&(m[1]=t,void 0!==r&&(m[2]=r,void 0!==e&&(m[3]=e,void 0!==o&&(m[4]=o,void 0!==u&&(m[5]=u,void 0!==a&&(m[6]=a,void 0!==c&&(m[7]=c,void 0!==i&&(m[8]=i,void 0!==s&&(m[9]=s,void 0!==f&&(m[10]=f,void 0!==h&&(m[11]=h,void 0!==M&&(m[12]=M,void 0!==l&&(m[13]=l,void 0!==w&&(m[14]=w,void 0!==d&&(m[15]=d)))))))))))))))),m},determinant:function(n){const t=n[0],r=n[1],e=n[2],o=n[3],u=n[4],a=n[5],c=n[6],i=n[7],s=n[8],f=n[9],h=n[10],M=n[11],l=n[12],w=n[13],d=n[14],m=n[15],v=h*m,p=d*M,q=c*m,b=d*i,y=c*M,x=h*i,g=e*m,S=d*o,A=e*M,_=h*o,T=e*i,z=c*o;return t*(v*a+b*f+y*w-(p*a+q*f+x*w))+u*(p*r+g*f+_*w-(v*r+S*f+A*w))+s*(q*r+S*a+T*w-(b*r+g*a+z*w))+l*(x*r+A*a+z*f-(y*r+_*a+T*f))},equals:function(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]&&n[3]===t[3]&&n[4]===t[4]&&n[5]===t[5]&&n[6]===t[6]&&n[7]===t[7]&&n[8]===t[8]&&n[9]===t[9]&&n[10]===t[10]&&n[11]===t[11]&&n[12]===t[12]&&n[13]===t[13]&&n[14]===t[14]&&n[15]===t[15]},equalsApproximately:function(t,r){return Math.abs(t[0]-r[0])<n&&Math.abs(t[1]-r[1])<n&&Math.abs(t[2]-r[2])<n&&Math.abs(t[3]-r[3])<n&&Math.abs(t[4]-r[4])<n&&Math.abs(t[5]-r[5])<n&&Math.abs(t[6]-r[6])<n&&Math.abs(t[7]-r[7])<n&&Math.abs(t[8]-r[8])<n&&Math.abs(t[9]-r[9])<n&&Math.abs(t[10]-r[10])<n&&Math.abs(t[11]-r[11])<n&&Math.abs(t[12]-r[12])<n&&Math.abs(t[13]-r[13])<n&&Math.abs(t[14]-r[14])<n&&Math.abs(t[15]-r[15])<n},fromMat3:function(n,t){return(t=t||new G(16))[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=0,t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=0,t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromQuat:function(n,t){t=t||new G(16);const r=n[0],e=n[1],o=n[2],u=n[3],a=r+r,c=e+e,i=o+o,s=r*a,f=e*a,h=e*c,M=o*a,l=o*c,w=o*i,d=u*a,m=u*c,v=u*i;return t[0]=1-h-w,t[1]=f+v,t[2]=M-m,t[3]=0,t[4]=f-v,t[5]=1-s-w,t[6]=l+d,t[7]=0,t[8]=M+m,t[9]=l-d,t[10]=1-s-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},frustum:function(n,t,r,e,o,u,a){const c=t-n,i=e-r,s=o-u;return(a=a||new G(16))[0]=2*o/c,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*o/i,a[6]=0,a[7]=0,a[8]=(n+t)/c,a[9]=(e+r)/i,a[10]=u/s,a[11]=-1,a[12]=0,a[13]=0,a[14]=o*u/s,a[15]=0,a},frustumReverseZ:function(n,t,r,e,o,u=1/0,a){const c=t-n,i=e-r;if((a=a||new G(16))[0]=2*o/c,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*o/i,a[6]=0,a[7]=0,a[8]=(n+t)/c,a[9]=(e+r)/i,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,u===1/0)a[10]=0,a[14]=o;else{const n=1/(u-o);a[10]=o*n,a[14]=u*o*n}return a},getAxis:function(n,t,r){const e=4*t;return(r=r||c())[0]=n[e+0],r[1]=n[e+1],r[2]=n[e+2],r},getScaling:function(n,t){t=t||c();const r=n[0],e=n[1],o=n[2],u=n[4],a=n[5],i=n[6],s=n[8],f=n[9],h=n[10];return t[0]=Math.sqrt(r*r+e*e+o*o),t[1]=Math.sqrt(u*u+a*a+i*i),t[2]=Math.sqrt(s*s+f*f+h*h),t},getTranslation:function(n,t){return(t=t||c())[0]=n[12],t[1]=n[13],t[2]=n[14],t},identity:K,inverse:W,invert:W,lookAt:function(n,t,r,e){return e=e||new G(16),tn=tn||c(),rn=rn||c(),en=en||c(),U(I(n,t,en),en),U(L(r,en,tn),tn),U(L(en,tn,rn),rn),e[0]=tn[0],e[1]=rn[0],e[2]=en[0],e[3]=0,e[4]=tn[1],e[5]=rn[1],e[6]=en[1],e[7]=0,e[8]=tn[2],e[9]=rn[2],e[10]=en[2],e[11]=0,e[12]=-(tn[0]*n[0]+tn[1]*n[1]+tn[2]*n[2]),e[13]=-(rn[0]*n[0]+rn[1]*n[1]+rn[2]*n[2]),e[14]=-(en[0]*n[0]+en[1]*n[1]+en[2]*n[2]),e[15]=1,e},mul:nn,multiply:nn,negate:function(n,t){return(t=t||new G(16))[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=-n[3],t[4]=-n[4],t[5]=-n[5],t[6]=-n[6],t[7]=-n[7],t[8]=-n[8],t[9]=-n[9],t[10]=-n[10],t[11]=-n[11],t[12]=-n[12],t[13]=-n[13],t[14]=-n[14],t[15]=-n[15],t},ortho:function(n,t,r,e,o,u,a){return(a=a||new G(16))[0]=2/(t-n),a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2/(e-r),a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1/(o-u),a[11]=0,a[12]=(t+n)/(n-t),a[13]=(e+r)/(r-e),a[14]=o/(o-u),a[15]=1,a},perspective:function(n,t,r,e,o){o=o||new G(16);const u=Math.tan(.5*Math.PI-.5*n);if(o[0]=u/t,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=u,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,Number.isFinite(e)){const n=1/(r-e);o[10]=e*n,o[14]=e*r*n}else o[10]=-1,o[14]=-r;return o},perspectiveReverseZ:function(n,t,r,e=1/0,o){o=o||new G(16);const u=1/Math.tan(.5*n);if(o[0]=u/t,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=u,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,e===1/0)o[10]=0,o[14]=r;else{const n=1/(e-r);o[10]=r*n,o[14]=e*r*n}return o},rotate:un,rotateX:function(n,t,r){r=r||new G(16);const e=n[4],o=n[5],u=n[6],a=n[7],c=n[8],i=n[9],s=n[10],f=n[11],h=Math.cos(t),M=Math.sin(t);return r[4]=h*e+M*c,r[5]=h*o+M*i,r[6]=h*u+M*s,r[7]=h*a+M*f,r[8]=h*c-M*e,r[9]=h*i-M*o,r[10]=h*s-M*u,r[11]=h*f-M*a,n!==r&&(r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r},rotateY:function(n,t,r){r=r||new G(16);const e=n[0],o=n[1],u=n[2],a=n[3],c=n[8],i=n[9],s=n[10],f=n[11],h=Math.cos(t),M=Math.sin(t);return r[0]=h*e-M*c,r[1]=h*o-M*i,r[2]=h*u-M*s,r[3]=h*a-M*f,r[8]=h*c+M*e,r[9]=h*i+M*o,r[10]=h*s+M*u,r[11]=h*f+M*a,n!==r&&(r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r},rotateZ:function(n,t,r){r=r||new G(16);const e=n[0],o=n[1],u=n[2],a=n[3],c=n[4],i=n[5],s=n[6],f=n[7],h=Math.cos(t),M=Math.sin(t);return r[0]=h*e+M*c,r[1]=h*o+M*i,r[2]=h*u+M*s,r[3]=h*a+M*f,r[4]=h*c-M*e,r[5]=h*i-M*o,r[6]=h*s-M*u,r[7]=h*f-M*a,n!==r&&(r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r},rotation:on,rotationX:function(n,t){t=t||new G(16);const r=Math.cos(n),e=Math.sin(n);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=e,t[7]=0,t[8]=0,t[9]=-e,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},rotationY:function(n,t){t=t||new G(16);const r=Math.cos(n),e=Math.sin(n);return t[0]=r,t[1]=0,t[2]=-e,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=e,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},rotationZ:function(n,t){t=t||new G(16);const r=Math.cos(n),e=Math.sin(n);return t[0]=r,t[1]=e,t[2]=0,t[3]=0,t[4]=-e,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},scale:function(n,t,r){r=r||new G(16);const e=t[0],o=t[1],u=t[2];return r[0]=e*n[0],r[1]=e*n[1],r[2]=e*n[2],r[3]=e*n[3],r[4]=o*n[4],r[5]=o*n[5],r[6]=o*n[6],r[7]=o*n[7],r[8]=u*n[8],r[9]=u*n[9],r[10]=u*n[10],r[11]=u*n[11],n!==r&&(r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r},scaling:function(n,t){return(t=t||new G(16))[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},set:function(n,t,r,e,o,u,a,c,i,s,f,h,M,l,w,d,m){return(m=m||new G(16))[0]=n,m[1]=t,m[2]=r,m[3]=e,m[4]=o,m[5]=u,m[6]=a,m[7]=c,m[8]=i,m[9]=s,m[10]=f,m[11]=h,m[12]=M,m[13]=l,m[14]=w,m[15]=d,m},setAxis:function(n,t,r,e){e!==n&&(e=J(n,e));const o=4*r;return e[o+0]=t[0],e[o+1]=t[1],e[o+2]=t[2],e},setDefaultType:H,setTranslation:function(n,t,r){return n!==(r=r||K())&&(r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11]),r[12]=t[0],r[13]=t[1],r[14]=t[2],r[15]=1,r},translate:function(n,t,r){r=r||new G(16);const e=t[0],o=t[1],u=t[2],a=n[0],c=n[1],i=n[2],s=n[3],f=n[4],h=n[5],M=n[6],l=n[7],w=n[8],d=n[9],m=n[10],v=n[11],p=n[12],q=n[13],b=n[14],y=n[15];return n!==r&&(r[0]=a,r[1]=c,r[2]=i,r[3]=s,r[4]=f,r[5]=h,r[6]=M,r[7]=l,r[8]=w,r[9]=d,r[10]=m,r[11]=v),r[12]=a*e+f*o+w*u+p,r[13]=c*e+h*o+d*u+q,r[14]=i*e+M*o+m*u+b,r[15]=s*e+l*o+v*u+y,r},translation:function(n,t){return(t=t||new G(16))[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},transpose:function(n,t){if((t=t||new G(16))===n){let r;return r=n[1],n[1]=n[4],n[4]=r,r=n[2],n[2]=n[8],n[8]=r,r=n[3],n[3]=n[12],n[12]=r,r=n[6],n[6]=n[9],n[9]=r,r=n[7],n[7]=n[13],n[13]=r,r=n[11],n[11]=n[14],n[14]=r,t}const r=n[0],e=n[1],o=n[2],u=n[3],a=n[4],c=n[5],i=n[6],s=n[7],f=n[8],h=n[9],M=n[10],l=n[11],w=n[12],d=n[13],m=n[14],v=n[15];return t[0]=r,t[1]=a,t[2]=f,t[3]=w,t[4]=e,t[5]=c,t[6]=h,t[7]=d,t[8]=o,t[9]=i,t[10]=M,t[11]=m,t[12]=u,t[13]=s,t[14]=l,t[15]=v,t},uniformScale:function(n,t,r){return(r=r||new G(16))[0]=t*n[0],r[1]=t*n[1],r[2]=t*n[2],r[3]=t*n[3],r[4]=t*n[4],r[5]=t*n[5],r[6]=t*n[6],r[7]=t*n[7],r[8]=t*n[8],r[9]=t*n[9],r[10]=t*n[10],r[11]=t*n[11],n!==r&&(r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r},uniformScaling:function(n,t){return(t=t||new G(16))[0]=n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}};let cn=Float32Array;function sn(n){const t=cn;return cn=n,t}function fn(n,t,r,e){const o=new cn(4);return void 0!==n&&(o[0]=n,void 0!==t&&(o[1]=t,void 0!==r&&(o[2]=r,void 0!==e&&(o[3]=e)))),o}function hn(n,t,r){r=r||new cn(4);const e=.5*t,o=Math.sin(e);return r[0]=o*n[0],r[1]=o*n[1],r[2]=o*n[2],r[3]=Math.cos(e),r}function Mn(n,t,r){r=r||new cn(4);const e=n[0],o=n[1],u=n[2],a=n[3],c=t[0],i=t[1],s=t[2],f=t[3];return r[0]=e*f+a*c+o*s-u*i,r[1]=o*f+a*i+u*c-e*s,r[2]=u*f+a*s+e*i-o*c,r[3]=a*f-e*c-o*i-u*s,r}function ln(t,r,e,o){o=o||new cn(4);const u=t[0],a=t[1],c=t[2],i=t[3];let s,f,h=r[0],M=r[1],l=r[2],w=r[3],d=u*h+a*M+c*l+i*w;if(d<0&&(d=-d,h=-h,M=-M,l=-l,w=-w),1-d>n){const n=Math.acos(d),t=Math.sin(n);s=Math.sin((1-e)*n)/t,f=Math.sin(e*n)/t}else s=1-e,f=e;return o[0]=s*u+f*h,o[1]=s*a+f*M,o[2]=s*c+f*l,o[3]=s*i+f*w,o}function wn(n,t){return(t=t||new cn(4))[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t}function dn(n,t,r){return(r=r||new cn(4))[0]=n[0]-t[0],r[1]=n[1]-t[1],r[2]=n[2]-t[2],r[3]=n[3]-t[3],r}function mn(n,t,r){return(r=r||new cn(4))[0]=n[0]*t,r[1]=n[1]*t,r[2]=n[2]*t,r[3]=n[3]*t,r}function vn(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]}function pn(n){const t=n[0],r=n[1],e=n[2],o=n[3];return Math.sqrt(t*t+r*r+e*e+o*o)}function qn(n){const t=n[0],r=n[1],e=n[2],o=n[3];return t*t+r*r+e*e+o*o}function bn(n,t){t=t||new cn(4);const r=n[0],e=n[1],o=n[2],u=n[3],a=Math.sqrt(r*r+e*e+o*o+u*u);return a>1e-5?(t[0]=r/a,t[1]=e/a,t[2]=o/a,t[3]=u/a):(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}let yn,xn,gn,Sn,An;var _n={__proto__:null,add:function(n,t,r){return(r=r||new cn(4))[0]=n[0]+t[0],r[1]=n[1]+t[1],r[2]=n[2]+t[2],r[3]=n[3]+t[3],r},angle:function(n,t){const r=vn(n,t);return Math.acos(2*r*r-1)},clone:wn,conjugate:function(n,t){return(t=t||new cn(4))[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t},copy:wn,create:fn,divScalar:function(n,t,r){return(r=r||new cn(4))[0]=n[0]/t,r[1]=n[1]/t,r[2]=n[2]/t,r[3]=n[3]/t,r},dot:vn,equals:function(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]&&n[3]===t[3]},equalsApproximately:function(t,r){return Math.abs(t[0]-r[0])<n&&Math.abs(t[1]-r[1])<n&&Math.abs(t[2]-r[2])<n&&Math.abs(t[3]-r[3])<n},fromAxisAngle:hn,fromEuler:function(n,t,r,e,o){o=o||new cn(4);const u=.5*n,a=.5*t,c=.5*r,i=Math.sin(u),s=Math.cos(u),f=Math.sin(a),h=Math.cos(a),M=Math.sin(c),l=Math.cos(c);switch(e){case"xyz":o[0]=i*h*l+s*f*M,o[1]=s*f*l-i*h*M,o[2]=s*h*M+i*f*l,o[3]=s*h*l-i*f*M;break;case"xzy":o[0]=i*h*l-s*f*M,o[1]=s*f*l-i*h*M,o[2]=s*h*M+i*f*l,o[3]=s*h*l+i*f*M;break;case"yxz":o[0]=i*h*l+s*f*M,o[1]=s*f*l-i*h*M,o[2]=s*h*M-i*f*l,o[3]=s*h*l+i*f*M;break;case"yzx":o[0]=i*h*l+s*f*M,o[1]=s*f*l+i*h*M,o[2]=s*h*M-i*f*l,o[3]=s*h*l-i*f*M;break;case"zxy":o[0]=i*h*l-s*f*M,o[1]=s*f*l+i*h*M,o[2]=s*h*M+i*f*l,o[3]=s*h*l-i*f*M;break;case"zyx":o[0]=i*h*l-s*f*M,o[1]=s*f*l+i*h*M,o[2]=s*h*M-i*f*l,o[3]=s*h*l+i*f*M;break;default:throw new Error(`Unknown rotation order: ${e}`)}return o},fromMat:function(n,t){t=t||new cn(4);const r=n[0]+n[5]+n[10];if(r>0){const e=Math.sqrt(r+1);t[3]=.5*e;const o=.5/e;t[0]=(n[6]-n[9])*o,t[1]=(n[8]-n[2])*o,t[2]=(n[1]-n[4])*o}else{let r=0;n[5]>n[0]&&(r=1),n[10]>n[4*r+r]&&(r=2);const e=(r+1)%3,o=(r+2)%3,u=Math.sqrt(n[4*r+r]-n[4*e+e]-n[4*o+o]+1);t[r]=.5*u;const a=.5/u;t[3]=(n[4*e+o]-n[4*o+e])*a,t[e]=(n[4*e+r]+n[4*r+e])*a,t[o]=(n[4*o+r]+n[4*r+o])*a}return t},fromValues:fn,identity:function(n){return(n=n||new cn(4))[0]=0,n[1]=0,n[2]=0,n[3]=1,n},inverse:function(n,t){t=t||new cn(4);const r=n[0],e=n[1],o=n[2],u=n[3],a=r*r+e*e+o*o+u*u,c=a?1/a:0;return t[0]=-r*c,t[1]=-e*c,t[2]=-o*c,t[3]=u*c,t},len:pn,lenSq:qn,length:pn,lengthSq:qn,lerp:function(n,t,r,e){return(e=e||new cn(4))[0]=n[0]+r*(t[0]-n[0]),e[1]=n[1]+r*(t[1]-n[1]),e[2]=n[2]+r*(t[2]-n[2]),e[3]=n[3]+r*(t[3]-n[3]),e},mul:Mn,mulScalar:mn,multiply:Mn,normalize:bn,rotateX:function(n,t,r){r=r||new cn(4);const e=.5*t,o=n[0],u=n[1],a=n[2],c=n[3],i=Math.sin(e),s=Math.cos(e);return r[0]=o*s+c*i,r[1]=u*s+a*i,r[2]=a*s-u*i,r[3]=c*s-o*i,r},rotateY:function(n,t,r){r=r||new cn(4);const e=.5*t,o=n[0],u=n[1],a=n[2],c=n[3],i=Math.sin(e),s=Math.cos(e);return r[0]=o*s-a*i,r[1]=u*s+c*i,r[2]=a*s+o*i,r[3]=c*s-u*i,r},rotateZ:function(n,t,r){r=r||new cn(4);const e=.5*t,o=n[0],u=n[1],a=n[2],c=n[3],i=Math.sin(e),s=Math.cos(e);return r[0]=o*s+u*i,r[1]=u*s-o*i,r[2]=a*s+c*i,r[3]=c*s-a*i,r},rotationTo:function(n,t,r){r=r||new cn(4),yn=yn||c(),xn=xn||c(1,0,0),gn=gn||c(0,1,0);const e=R(n,t);return e<-.999999?(L(xn,n,yn),X(yn)<1e-6&&L(gn,n,yn),U(yn,yn),hn(yn,Math.PI,r),r):e>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(L(n,t,yn),r[0]=yn[0],r[1]=yn[1],r[2]=yn[2],r[3]=1+e,bn(r,r))},scale:mn,set:function(n,t,r,e,o){return(o=o||new cn(4))[0]=n,o[1]=t,o[2]=r,o[3]=e,o},setDefaultType:sn,slerp:ln,sqlerp:function(n,t,r,e,o,u){return u=u||new cn(4),Sn=Sn||new cn(4),An=An||new cn(4),ln(n,e,o,Sn),ln(t,r,o,An),ln(Sn,An,2*o*(1-o),u),u},sub:dn,subtract:dn,toAxisAngle:function(t,r){r=r||c(4);const e=2*Math.acos(t[3]),o=Math.sin(.5*e);return o>n?(r[0]=t[0]/o,r[1]=t[1]/o,r[2]=t[2]/o):(r[0]=1,r[1]=0,r[2]=0),{angle:e,axis:r}}};let Tn=Float32Array;function zn(n){const t=Tn;return Tn=n,t}function Fn(n,t,r,e){const o=new Tn(4);return void 0!==n&&(o[0]=n,void 0!==t&&(o[1]=t,void 0!==r&&(o[2]=r,void 0!==e&&(o[3]=e)))),o}function kn(n,t,r){return(r=r||new Tn(4))[0]=n[0]-t[0],r[1]=n[1]-t[1],r[2]=n[2]-t[2],r[3]=n[3]-t[3],r}function Dn(n,t,r,e){return(e=e||new Tn(4))[0]=n[0]+r*(t[0]-n[0]),e[1]=n[1]+r*(t[1]-n[1]),e[2]=n[2]+r*(t[2]-n[2]),e[3]=n[3]+r*(t[3]-n[3]),e}function In(n,t,r){return(r=r||new Tn(4))[0]=n[0]*t,r[1]=n[1]*t,r[2]=n[2]*t,r[3]=n[3]*t,r}function Pn(n,t){return(t=t||new Tn(4))[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t[3]=1/n[3],t}function Vn(n){const t=n[0],r=n[1],e=n[2],o=n[3];return Math.sqrt(t*t+r*r+e*e+o*o)}function Zn(n){const t=n[0],r=n[1],e=n[2],o=n[3];return t*t+r*r+e*e+o*o}function Ln(n,t){const r=n[0]-t[0],e=n[1]-t[1],o=n[2]-t[2],u=n[3]-t[3];return Math.sqrt(r*r+e*e+o*o+u*u)}function Rn(n,t){const r=n[0]-t[0],e=n[1]-t[1],o=n[2]-t[2],u=n[3]-t[3];return r*r+e*e+o*o+u*u}function En(n,t){t=t||new Tn(4);const r=n[0],e=n[1],o=n[2],u=n[3],a=Math.sqrt(r*r+e*e+o*o+u*u);return a>1e-5?(t[0]=r/a,t[1]=e/a,t[2]=o/a,t[3]=u/a):(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Xn(n,t){return(t=t||new Tn(4))[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t}function Yn(n,t,r){return(r=r||new Tn(4))[0]=n[0]*t[0],r[1]=n[1]*t[1],r[2]=n[2]*t[2],r[3]=n[3]*t[3],r}function Qn(n,t,r){return(r=r||new Tn(4))[0]=n[0]/t[0],r[1]=n[1]/t[1],r[2]=n[2]/t[2],r[3]=n[3]/t[3],r}function Nn(n,t,r){return En(n,r=r||new Tn(4)),In(r,t,r)}var Un={__proto__:null,add:function(n,t,r){return(r=r||new Tn(4))[0]=n[0]+t[0],r[1]=n[1]+t[1],r[2]=n[2]+t[2],r[3]=n[3]+t[3],r},addScaled:function(n,t,r,e){return(e=e||new Tn(4))[0]=n[0]+t[0]*r,e[1]=n[1]+t[1]*r,e[2]=n[2]+t[2]*r,e[3]=n[3]+t[3]*r,e},ceil:function(n,t){return(t=t||new Tn(4))[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t[3]=Math.ceil(n[3]),t},clamp:function(n,t=0,r=1,e){return(e=e||new Tn(4))[0]=Math.min(r,Math.max(t,n[0])),e[1]=Math.min(r,Math.max(t,n[1])),e[2]=Math.min(r,Math.max(t,n[2])),e[3]=Math.min(r,Math.max(t,n[3])),e},clone:Xn,copy:Xn,create:Fn,dist:Ln,distSq:Rn,distance:Ln,distanceSq:Rn,div:Qn,divScalar:function(n,t,r){return(r=r||new Tn(4))[0]=n[0]/t,r[1]=n[1]/t,r[2]=n[2]/t,r[3]=n[3]/t,r},divide:Qn,dot:function(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]},equals:function(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]&&n[3]===t[3]},equalsApproximately:function(t,r){return Math.abs(t[0]-r[0])<n&&Math.abs(t[1]-r[1])<n&&Math.abs(t[2]-r[2])<n&&Math.abs(t[3]-r[3])<n},floor:function(n,t){return(t=t||new Tn(4))[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t[3]=Math.floor(n[3]),t},fromValues:Fn,inverse:Pn,invert:Pn,len:Vn,lenSq:Zn,length:Vn,lengthSq:Zn,lerp:Dn,lerpV:function(n,t,r,e){return(e=e||new Tn(4))[0]=n[0]+r[0]*(t[0]-n[0]),e[1]=n[1]+r[1]*(t[1]-n[1]),e[2]=n[2]+r[2]*(t[2]-n[2]),e[3]=n[3]+r[3]*(t[3]-n[3]),e},max:function(n,t,r){return(r=r||new Tn(4))[0]=Math.max(n[0],t[0]),r[1]=Math.max(n[1],t[1]),r[2]=Math.max(n[2],t[2]),r[3]=Math.max(n[3],t[3]),r},midpoint:function(n,t,r){return Dn(n,t,.5,r=r||new Tn(4))},min:function(n,t,r){return(r=r||new Tn(4))[0]=Math.min(n[0],t[0]),r[1]=Math.min(n[1],t[1]),r[2]=Math.min(n[2],t[2]),r[3]=Math.min(n[3],t[3]),r},mul:Yn,mulScalar:In,multiply:Yn,negate:function(n,t){return(t=t||new Tn(4))[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=-n[3],t},normalize:En,round:function(n,t){return(t=t||new Tn(4))[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t[3]=Math.round(n[3]),t},scale:In,set:function(n,t,r,e,o){return(o=o||new Tn(4))[0]=n,o[1]=t,o[2]=r,o[3]=e,o},setDefaultType:zn,setLength:Nn,sub:kn,subtract:kn,transformMat4:function(n,t,r){r=r||new Tn(4);const e=n[0],o=n[1],u=n[2],a=n[3];return r[0]=t[0]*e+t[4]*o+t[8]*u+t[12]*a,r[1]=t[1]*e+t[5]*o+t[9]*u+t[13]*a,r[2]=t[2]*e+t[6]*o+t[10]*u+t[14]*a,r[3]=t[3]*e+t[7]*o+t[11]*u+t[15]*a,r},truncate:function(n,t,r){return r=r||new Tn(4),Vn(n)>t?Nn(n,t,r):Xn(n,r)},zero:function(n){return(n=n||new Tn(4))[0]=0,n[1]=0,n[2]=0,n[3]=0,n}};function jn(n){_(n),H(n),sn(n),e(n),a(n),zn(n)}export{D as mat3,an as mat4,_n as quat,jn as setDefaultType,t as utils,x as vec2,C as vec3,Un as vec4};
//# sourceMappingURL=wgpu-matrix.module.min.js.map
