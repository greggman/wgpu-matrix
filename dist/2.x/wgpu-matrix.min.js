/* wgpu-matrix@2.8.2, license MIT */
(function(M,aa){"object"===typeof exports&&"undefined"!==typeof module?aa(exports):"function"===typeof define&&define.amd?define(["exports"],aa):(M="undefined"!==typeof globalThis?globalThis:M||self,aa(M.wgpuMatrix={}))})(this,function(M){function aa(a){const b=y;y=a;return b}function ba(a=0,b=0){const c=new y(2);void 0!==a&&(c[0]=a,void 0!==b&&(c[1]=b));return c}function Da(a){const b=u;u=a;return b}function H(a,b,c){const d=new u(3);void 0!==a&&(d[0]=a,void 0!==b&&(d[1]=b,void 0!==c&&(d[2]=c)));
return d}function Ea(a,b,c){c=c||new y(2);c[0]=a[0]-b[0];c[1]=a[1]-b[1];return c}function Fa(a,b,c,d){d=d||new y(2);d[0]=a[0]+c*(b[0]-a[0]);d[1]=a[1]+c*(b[1]-a[1]);return d}function qa(a,b,c){c=c||new y(2);c[0]=a[0]*b;c[1]=a[1]*b;return c}function Ga(a,b){b=b||new y(2);b[0]=1/a[0];b[1]=1/a[1];return b}function Ha(a,b){return a[0]*b[0]+a[1]*b[1]}function ra(a){const b=a[0];a=a[1];return Math.sqrt(b*b+a*a)}function Ia(a){const b=a[0];a=a[1];return b*b+a*a}function Ja(a,b){const c=a[0]-b[0];a=a[1]-b[1];
return Math.sqrt(c*c+a*a)}function Ka(a,b){const c=a[0]-b[0];a=a[1]-b[1];return c*c+a*a}function La(a,b){b=b||new y(2);const c=a[0];a=a[1];const d=Math.sqrt(c*c+a*a);1E-5<d?(b[0]=c/d,b[1]=a/d):(b[0]=0,b[1]=0);return b}function sa(a,b){b=b||new y(2);b[0]=a[0];b[1]=a[1];return b}function Ma(a,b,c){c=c||new y(2);c[0]=a[0]*b[0];c[1]=a[1]*b[1];return c}function Na(a,b,c){c=c||new y(2);c[0]=a[0]/b[0];c[1]=a[1]/b[1];return c}function Oa(a,b,c){c=c||new y(2);La(a,c);return qa(c,b,c)}function Pa(a){const b=
Qa;Qa=a;G=Ra.get(a);return b}function ta(a,b){b=b||G();b[0]=a[0];b[1]=a[1];b[2]=a[2];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[8]=a[8];b[9]=a[9];b[10]=a[10];return b}function Sa(a){a=a||G();a[0]=1;a[1]=0;a[2]=0;a[4]=0;a[5]=1;a[6]=0;a[8]=0;a[9]=0;a[10]=1;return a}function Ta(a,b){b=b||G();const c=a[0],d=a[1],e=a[2],f=a[4],g=a[5],h=a[6],l=a[8],k=a[9];a=a[10];const m=a*g-h*k,n=-a*f+h*l,q=k*f-g*l,r=1/(c*m+d*n+e*q);b[0]=m*r;b[1]=(-a*d+e*k)*r;b[2]=(h*d-e*g)*r;b[4]=n*r;b[5]=(a*c-e*l)*r;b[6]=(-h*c+e*f)*r;b[8]=q*r;
b[9]=(-k*c+d*l)*r;b[10]=(g*c-d*f)*r;return b}function Ua(a,b,c){c=c||G();const d=a[0],e=a[1],f=a[2],g=a[4],h=a[5],l=a[6],k=a[8],m=a[9];a=a[10];const n=b[0],q=b[1],r=b[2],w=b[4],v=b[5],p=b[6],E=b[8],F=b[9];b=b[10];c[0]=d*n+g*q+k*r;c[1]=e*n+h*q+m*r;c[2]=f*n+l*q+a*r;c[4]=d*w+g*v+k*p;c[5]=e*w+h*v+m*p;c[6]=f*w+l*v+a*p;c[8]=d*E+g*F+k*b;c[9]=e*E+h*F+m*b;c[10]=f*E+l*F+a*b;return c}function ca(a,b,c){c=c||new u(3);c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];return c}function Va(a,b,c,d){d=d||new u(3);d[0]=
a[0]+c*(b[0]-a[0]);d[1]=a[1]+c*(b[1]-a[1]);d[2]=a[2]+c*(b[2]-a[2]);return d}function ua(a,b,c){c=c||new u(3);c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;return c}function Wa(a,b){b=b||new u(3);b[0]=1/a[0];b[1]=1/a[1];b[2]=1/a[2];return b}function P(a,b,c){c=c||new u(3);const d=a[2]*b[0]-a[0]*b[2],e=a[0]*b[1]-a[1]*b[0];c[0]=a[1]*b[2]-a[2]*b[1];c[1]=d;c[2]=e;return c}function va(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function da(a){const b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)}function Xa(a){const b=
a[0],c=a[1];a=a[2];return b*b+c*c+a*a}function Ya(a,b){const c=a[0]-b[0],d=a[1]-b[1];a=a[2]-b[2];return Math.sqrt(c*c+d*d+a*a)}function Za(a,b){const c=a[0]-b[0],d=a[1]-b[1];a=a[2]-b[2];return c*c+d*d+a*a}function N(a,b){b=b||new u(3);const c=a[0],d=a[1];a=a[2];const e=Math.sqrt(c*c+d*d+a*a);1E-5<e?(b[0]=c/e,b[1]=d/e,b[2]=a/e):(b[0]=0,b[1]=0,b[2]=0);return b}function wa(a,b){b=b||new u(3);b[0]=a[0];b[1]=a[1];b[2]=a[2];return b}function $a(a,b,c){c=c||new u(3);c[0]=a[0]*b[0];c[1]=a[1]*b[1];c[2]=a[2]*
b[2];return c}function ab(a,b,c){c=c||new u(3);c[0]=a[0]/b[0];c[1]=a[1]/b[1];c[2]=a[2]/b[2];return c}function bb(a,b,c){c=c||new u(3);N(a,c);return ua(c,b,c)}function cb(a){const b=x;x=a;return b}function xa(a,b){b=b||new x(16);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b}function db(a){a=a||new x(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;
a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function eb(a,b){b=b||new x(16);const c=a[0];var d=a[1];const e=a[2],f=a[3],g=a[4];var h=a[5];const l=a[6],k=a[7],m=a[8],n=a[9],q=a[10],r=a[11],w=a[12];var v=a[13];const p=a[14];a=a[15];const E=q*a,F=p*r,I=l*a,J=p*k,K=l*r,L=q*k,Q=e*a,R=p*f,S=e*r,T=q*f,U=e*k,V=l*f,W=m*v,X=w*n,Y=g*v,Z=w*h,ea=g*n,fa=m*h,ha=c*v,ia=w*d,ja=c*n,ka=m*d,la=c*h,ma=g*d,fb=E*h+J*n+K*v-(F*h+I*n+L*v),gb=F*d+Q*n+T*v-(E*d+R*n+S*v);v=I*d+R*h+U*v-(J*d+Q*h+V*v);d=L*d+S*
h+V*n-(K*d+T*h+U*n);h=1/(c*fb+g*gb+m*v+w*d);b[0]=h*fb;b[1]=h*gb;b[2]=h*v;b[3]=h*d;b[4]=h*(F*g+I*m+L*w-(E*g+J*m+K*w));b[5]=h*(E*c+R*m+S*w-(F*c+Q*m+T*w));b[6]=h*(J*c+Q*g+V*w-(I*c+R*g+U*w));b[7]=h*(K*c+T*g+U*m-(L*c+S*g+V*m));b[8]=h*(W*k+Z*r+ea*a-(X*k+Y*r+fa*a));b[9]=h*(X*f+ha*r+ka*a-(W*f+ia*r+ja*a));b[10]=h*(Y*f+ia*k+la*a-(Z*f+ha*k+ma*a));b[11]=h*(fa*f+ja*k+ma*r-(ea*f+ka*k+la*r));b[12]=h*(Y*q+fa*p+X*l-(ea*p+W*l+Z*q));b[13]=h*(ja*p+W*e+ia*q-(ha*q+ka*p+X*e));b[14]=h*(ha*l+ma*p+Z*e-(la*p+Y*e+ia*l));b[15]=
h*(la*q+ea*e+ka*l-(ja*l+ma*q+fa*e));return b}function hb(a,b,c){c=c||new x(16);const d=a[0],e=a[1],f=a[2],g=a[3],h=a[4],l=a[5],k=a[6],m=a[7],n=a[8],q=a[9],r=a[10],w=a[11],v=a[12],p=a[13],E=a[14];a=a[15];const F=b[0],I=b[1],J=b[2],K=b[3],L=b[4],Q=b[5],R=b[6],S=b[7],T=b[8],U=b[9],V=b[10],W=b[11],X=b[12],Y=b[13],Z=b[14];b=b[15];c[0]=d*F+h*I+n*J+v*K;c[1]=e*F+l*I+q*J+p*K;c[2]=f*F+k*I+r*J+E*K;c[3]=g*F+m*I+w*J+a*K;c[4]=d*L+h*Q+n*R+v*S;c[5]=e*L+l*Q+q*R+p*S;c[6]=f*L+k*Q+r*R+E*S;c[7]=g*L+m*Q+w*R+a*S;c[8]=d*
T+h*U+n*V+v*W;c[9]=e*T+l*U+q*V+p*W;c[10]=f*T+k*U+r*V+E*W;c[11]=g*T+m*U+w*V+a*W;c[12]=d*X+h*Y+n*Z+v*b;c[13]=e*X+l*Y+q*Z+p*b;c[14]=f*X+k*Y+r*Z+E*b;c[15]=g*X+m*Y+w*Z+a*b;return c}function ib(a,b,c){c=c||new x(16);let d=a[0],e=a[1];a=a[2];var f=Math.sqrt(d*d+e*e+a*a);d/=f;e/=f;a/=f;f=d*d;const g=e*e,h=a*a,l=Math.cos(b);b=Math.sin(b);const k=1-l;c[0]=f+(1-f)*l;c[1]=d*e*k+a*b;c[2]=d*a*k-e*b;c[3]=0;c[4]=d*e*k-a*b;c[5]=g+(1-g)*l;c[6]=e*a*k+d*b;c[7]=0;c[8]=d*a*k+e*b;c[9]=e*a*k-d*b;c[10]=h+(1-h)*l;c[11]=0;
c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function jb(a,b,c,d){d=d||new x(16);var e=b[0],f=b[1],g=b[2];b=Math.sqrt(e*e+f*f+g*g);e/=b;f/=b;g/=b;b=e*e;var h=f*f,l=g*g,k=Math.cos(c),m=Math.sin(c),n=1-k;c=b+(1-b)*k;b=e*f*n+g*m;const q=e*g*n-f*m,r=e*f*n-g*m;h+=(1-h)*k;const w=f*g*n+e*m,v=e*g*n+f*m;e=f*g*n-e*m;f=l+(1-l)*k;g=a[0];l=a[1];k=a[2];m=a[3];n=a[4];const p=a[5],E=a[6],F=a[7],I=a[8],J=a[9],K=a[10],L=a[11];d[0]=c*g+b*n+q*I;d[1]=c*l+b*p+q*J;d[2]=c*k+b*E+q*K;d[3]=c*m+b*F+q*L;d[4]=r*g+h*n+w*I;d[5]=r*
l+h*p+w*J;d[6]=r*k+h*E+w*K;d[7]=r*m+h*F+w*L;d[8]=v*g+e*n+f*I;d[9]=v*l+e*p+f*J;d[10]=v*k+e*E+f*K;d[11]=v*m+e*F+f*L;a!==d&&(d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15]);return d}function kb(a){const b=C;C=a;return b}function lb(a,b,c,d){const e=new C(4);void 0!==a&&(e[0]=a,void 0!==b&&(e[1]=b,void 0!==c&&(e[2]=c,void 0!==d&&(e[3]=d))));return e}function mb(a,b,c){c=c||new C(4);b*=.5;const d=Math.sin(b);c[0]=d*a[0];c[1]=d*a[1];c[2]=d*a[2];c[3]=Math.cos(b);return c}function nb(a,b,c){c=c||new C(4);
const d=a[0],e=a[1],f=a[2];a=a[3];const g=b[0],h=b[1],l=b[2];b=b[3];c[0]=d*b+a*g+e*l-f*h;c[1]=e*b+a*h+f*g-d*l;c[2]=f*b+a*l+d*h-e*g;c[3]=a*b-d*g-e*h-f*l;return c}function na(a,b,c,d){d=d||new C(4);const e=a[0],f=a[1],g=a[2];a=a[3];let h=b[0],l=b[1],k=b[2];b=b[3];var m=e*h+f*l+g*k+a*b;0>m&&(m=-m,h=-h,l=-l,k=-k,b=-b);if(1-m>t){const n=Math.acos(m),q=Math.sin(n);m=Math.sin((1-c)*n)/q;c=Math.sin(c*n)/q}else m=1-c;d[0]=m*e+c*h;d[1]=m*f+c*l;d[2]=m*g+c*k;d[3]=m*a+c*b;return d}function ob(a,b){b=b||new C(4);
b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b}function pb(a,b,c){c=c||new C(4);c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];c[3]=a[3]-b[3];return c}function qb(a,b,c){c=c||new C(4);c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c}function rb(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function sb(a){const b=a[0],c=a[1],d=a[2];a=a[3];return Math.sqrt(b*b+c*c+d*d+a*a)}function tb(a){const b=a[0],c=a[1],d=a[2];a=a[3];return b*b+c*c+d*d+a*a}function ub(a,b){b=b||new C(4);const c=a[0],
d=a[1],e=a[2];a=a[3];const f=Math.sqrt(c*c+d*d+e*e+a*a);1E-5<f?(b[0]=c/f,b[1]=d/f,b[2]=e/f,b[3]=a/f):(b[0]=0,b[1]=0,b[2]=0,b[3]=0);return b}function vb(a){const b=A;A=a;return b}function wb(a,b,c,d){const e=new A(4);void 0!==a&&(e[0]=a,void 0!==b&&(e[1]=b,void 0!==c&&(e[2]=c,void 0!==d&&(e[3]=d))));return e}function xb(a,b,c){c=c||new A(4);c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];c[3]=a[3]-b[3];return c}function yb(a,b,c,d){d=d||new A(4);d[0]=a[0]+c*(b[0]-a[0]);d[1]=a[1]+c*(b[1]-a[1]);d[2]=a[2]+
c*(b[2]-a[2]);d[3]=a[3]+c*(b[3]-a[3]);return d}function ya(a,b,c){c=c||new A(4);c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c}function zb(a,b){b=b||new A(4);b[0]=1/a[0];b[1]=1/a[1];b[2]=1/a[2];b[3]=1/a[3];return b}function za(a){const b=a[0],c=a[1],d=a[2];a=a[3];return Math.sqrt(b*b+c*c+d*d+a*a)}function Ab(a){const b=a[0],c=a[1],d=a[2];a=a[3];return b*b+c*c+d*d+a*a}function Bb(a,b){const c=a[0]-b[0],d=a[1]-b[1],e=a[2]-b[2];a=a[3]-b[3];return Math.sqrt(c*c+d*d+e*e+a*a)}function Cb(a,b){const c=
a[0]-b[0],d=a[1]-b[1],e=a[2]-b[2];a=a[3]-b[3];return c*c+d*d+e*e+a*a}function Db(a,b){b=b||new A(4);const c=a[0],d=a[1],e=a[2];a=a[3];const f=Math.sqrt(c*c+d*d+e*e+a*a);1E-5<f?(b[0]=c/f,b[1]=d/f,b[2]=e/f,b[3]=a/f):(b[0]=0,b[1]=0,b[2]=0,b[3]=0);return b}function Aa(a,b){b=b||new A(4);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b}function Eb(a,b,c){c=c||new A(4);c[0]=a[0]*b[0];c[1]=a[1]*b[1];c[2]=a[2]*b[2];c[3]=a[3]*b[3];return c}function Fb(a,b,c){c=c||new A(4);c[0]=a[0]/b[0];c[1]=a[1]/b[1];c[2]=
a[2]/b[2];c[3]=a[3]/b[3];return c}function Gb(a,b,c){c=c||new A(4);Db(a,c);return ya(c,b,c)}let t=1E-6,y=Float32Array,u=Float32Array;var Hb={__proto__:null,add:function(a,b,c){c=c||new y(2);c[0]=a[0]+b[0];c[1]=a[1]+b[1];return c},addScaled:function(a,b,c,d){d=d||new y(2);d[0]=a[0]+b[0]*c;d[1]=a[1]+b[1]*c;return d},angle:function(a,b){var c=a[0];const d=a[1],e=b[0],f=b[1];a=(c=Math.sqrt(c*c+d*d)*Math.sqrt(e*e+f*f))&&Ha(a,b)/c;return Math.acos(a)},ceil:function(a,b){b=b||new y(2);b[0]=Math.ceil(a[0]);
b[1]=Math.ceil(a[1]);return b},clamp:function(a,b=0,c=1,d){d=d||new y(2);d[0]=Math.min(c,Math.max(b,a[0]));d[1]=Math.min(c,Math.max(b,a[1]));return d},clone:sa,copy:sa,create:ba,cross:function(a,b,c){c=c||new u(3);a=a[0]*b[1]-a[1]*b[0];c[0]=0;c[1]=0;c[2]=a;return c},dist:Ja,distSq:Ka,distance:Ja,distanceSq:Ka,div:Na,divScalar:function(a,b,c){c=c||new y(2);c[0]=a[0]/b;c[1]=a[1]/b;return c},divide:Na,dot:Ha,equals:function(a,b){return a[0]===b[0]&&a[1]===b[1]},equalsApproximately:function(a,b){return Math.abs(a[0]-
b[0])<t&&Math.abs(a[1]-b[1])<t},floor:function(a,b){b=b||new y(2);b[0]=Math.floor(a[0]);b[1]=Math.floor(a[1]);return b},fromValues:ba,inverse:Ga,invert:Ga,len:ra,lenSq:Ia,length:ra,lengthSq:Ia,lerp:Fa,lerpV:function(a,b,c,d){d=d||new y(2);d[0]=a[0]+c[0]*(b[0]-a[0]);d[1]=a[1]+c[1]*(b[1]-a[1]);return d},max:function(a,b,c){c=c||new y(2);c[0]=Math.max(a[0],b[0]);c[1]=Math.max(a[1],b[1]);return c},midpoint:function(a,b,c){c=c||new y(2);return Fa(a,b,.5,c)},min:function(a,b,c){c=c||new y(2);c[0]=Math.min(a[0],
b[0]);c[1]=Math.min(a[1],b[1]);return c},mul:Ma,mulScalar:qa,multiply:Ma,negate:function(a,b){b=b||new y(2);b[0]=-a[0];b[1]=-a[1];return b},normalize:La,random:function(a=1,b){b=b||new y(2);const c=2*Math.random()*Math.PI;b[0]=Math.cos(c)*a;b[1]=Math.sin(c)*a;return b},rotate:function(a,b,c,d){d=d||new y(2);const e=a[0]-b[0];a=a[1]-b[1];const f=Math.sin(c);c=Math.cos(c);d[0]=e*c-a*f+b[0];d[1]=e*f+a*c+b[1];return d},round:function(a,b){b=b||new y(2);b[0]=Math.round(a[0]);b[1]=Math.round(a[1]);return b},
scale:qa,set:function(a,b,c){c=c||new y(2);c[0]=a;c[1]=b;return c},setDefaultType:aa,setLength:Oa,sub:Ea,subtract:Ea,transformMat3:function(a,b,c){c=c||new y(2);const d=a[0];a=a[1];c[0]=b[0]*d+b[4]*a+b[8];c[1]=b[1]*d+b[5]*a+b[9];return c},transformMat4:function(a,b,c){c=c||new y(2);const d=a[0];a=a[1];c[0]=d*b[0]+a*b[4]+b[12];c[1]=d*b[1]+a*b[5]+b[13];return c},truncate:function(a,b,c){c=c||new y(2);return ra(a)>b?Oa(a,b,c):sa(a,c)},zero:function(a){a=a||new y(2);a[0]=0;a[1]=0;return a}};let Qa=Float32Array;
const Ra=new Map([[Float32Array,()=>new Float32Array(12)],[Float64Array,()=>new Float64Array(12)],[Array,()=>Array(12).fill(0)]]);let G=Ra.get(Float32Array);var Ib={__proto__:null,add:function(a,b,c){c=c||new u(3);c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];return c},addScaled:function(a,b,c,d){d=d||new u(3);d[0]=a[0]+b[0]*c;d[1]=a[1]+b[1]*c;d[2]=a[2]+b[2]*c;return d},angle:function(a,b){var c=a[0];const d=a[1],e=a[2],f=b[0],g=b[1],h=b[2];a=(c=Math.sqrt(c*c+d*d+e*e)*Math.sqrt(f*f+g*g+h*h))&&va(a,
b)/c;return Math.acos(a)},ceil:function(a,b){b=b||new u(3);b[0]=Math.ceil(a[0]);b[1]=Math.ceil(a[1]);b[2]=Math.ceil(a[2]);return b},clamp:function(a,b=0,c=1,d){d=d||new u(3);d[0]=Math.min(c,Math.max(b,a[0]));d[1]=Math.min(c,Math.max(b,a[1]));d[2]=Math.min(c,Math.max(b,a[2]));return d},clone:wa,copy:wa,create:H,cross:P,dist:Ya,distSq:Za,distance:Ya,distanceSq:Za,div:ab,divScalar:function(a,b,c){c=c||new u(3);c[0]=a[0]/b;c[1]=a[1]/b;c[2]=a[2]/b;return c},divide:ab,dot:va,equals:function(a,b){return a[0]===
b[0]&&a[1]===b[1]&&a[2]===b[2]},equalsApproximately:function(a,b){return Math.abs(a[0]-b[0])<t&&Math.abs(a[1]-b[1])<t&&Math.abs(a[2]-b[2])<t},floor:function(a,b){b=b||new u(3);b[0]=Math.floor(a[0]);b[1]=Math.floor(a[1]);b[2]=Math.floor(a[2]);return b},fromValues:H,getAxis:function(a,b,c){c=c||new u(3);b*=4;c[0]=a[b+0];c[1]=a[b+1];c[2]=a[b+2];return c},getScaling:function(a,b){b=b||new u(3);const c=a[0],d=a[1],e=a[2],f=a[4],g=a[5],h=a[6],l=a[8],k=a[9];a=a[10];b[0]=Math.sqrt(c*c+d*d+e*e);b[1]=Math.sqrt(f*
f+g*g+h*h);b[2]=Math.sqrt(l*l+k*k+a*a);return b},getTranslation:function(a,b){b=b||new u(3);b[0]=a[12];b[1]=a[13];b[2]=a[14];return b},inverse:Wa,invert:Wa,len:da,lenSq:Xa,length:da,lengthSq:Xa,lerp:Va,lerpV:function(a,b,c,d){d=d||new u(3);d[0]=a[0]+c[0]*(b[0]-a[0]);d[1]=a[1]+c[1]*(b[1]-a[1]);d[2]=a[2]+c[2]*(b[2]-a[2]);return d},max:function(a,b,c){c=c||new u(3);c[0]=Math.max(a[0],b[0]);c[1]=Math.max(a[1],b[1]);c[2]=Math.max(a[2],b[2]);return c},midpoint:function(a,b,c){c=c||new u(3);return Va(a,
b,.5,c)},min:function(a,b,c){c=c||new u(3);c[0]=Math.min(a[0],b[0]);c[1]=Math.min(a[1],b[1]);c[2]=Math.min(a[2],b[2]);return c},mul:$a,mulScalar:ua,multiply:$a,negate:function(a,b){b=b||new u(3);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];return b},normalize:N,random:function(a=1,b){b=b||new u(3);const c=2*Math.random()*Math.PI,d=2*Math.random()-1,e=Math.sqrt(1-d*d)*a;b[0]=Math.cos(c)*e;b[1]=Math.sin(c)*e;b[2]=d*a;return b},rotateX:function(a,b,c,d){d=d||new u(3);const e=[],f=[];e[0]=a[0]-b[0];e[1]=a[1]-b[1];
e[2]=a[2]-b[2];f[0]=e[0];f[1]=e[1]*Math.cos(c)-e[2]*Math.sin(c);f[2]=e[1]*Math.sin(c)+e[2]*Math.cos(c);d[0]=f[0]+b[0];d[1]=f[1]+b[1];d[2]=f[2]+b[2];return d},rotateY:function(a,b,c,d){d=d||new u(3);const e=[],f=[];e[0]=a[0]-b[0];e[1]=a[1]-b[1];e[2]=a[2]-b[2];f[0]=e[2]*Math.sin(c)+e[0]*Math.cos(c);f[1]=e[1];f[2]=e[2]*Math.cos(c)-e[0]*Math.sin(c);d[0]=f[0]+b[0];d[1]=f[1]+b[1];d[2]=f[2]+b[2];return d},rotateZ:function(a,b,c,d){d=d||new u(3);const e=[],f=[];e[0]=a[0]-b[0];e[1]=a[1]-b[1];e[2]=a[2]-b[2];
f[0]=e[0]*Math.cos(c)-e[1]*Math.sin(c);f[1]=e[0]*Math.sin(c)+e[1]*Math.cos(c);f[2]=e[2];d[0]=f[0]+b[0];d[1]=f[1]+b[1];d[2]=f[2]+b[2];return d},round:function(a,b){b=b||new u(3);b[0]=Math.round(a[0]);b[1]=Math.round(a[1]);b[2]=Math.round(a[2]);return b},scale:ua,set:function(a,b,c,d){d=d||new u(3);d[0]=a;d[1]=b;d[2]=c;return d},setDefaultType:Da,setLength:bb,sub:ca,subtract:ca,transformMat3:function(a,b,c){c=c||new u(3);const d=a[0],e=a[1];a=a[2];c[0]=d*b[0]+e*b[4]+a*b[8];c[1]=d*b[1]+e*b[5]+a*b[9];
c[2]=d*b[2]+e*b[6]+a*b[10];return c},transformMat4:function(a,b,c){c=c||new u(3);const d=a[0],e=a[1];a=a[2];const f=b[3]*d+b[7]*e+b[11]*a+b[15]||1;c[0]=(b[0]*d+b[4]*e+b[8]*a+b[12])/f;c[1]=(b[1]*d+b[5]*e+b[9]*a+b[13])/f;c[2]=(b[2]*d+b[6]*e+b[10]*a+b[14])/f;return c},transformMat4Upper3x3:function(a,b,c){c=c||new u(3);const d=a[0],e=a[1];a=a[2];c[0]=d*b[0]+e*b[4]+a*b[8];c[1]=d*b[1]+e*b[5]+a*b[9];c[2]=d*b[2]+e*b[6]+a*b[10];return c},transformQuat:function(a,b,c){c=c||new u(3);const d=b[0],e=b[1],f=b[2];
b=2*b[3];const g=a[0],h=a[1];a=a[2];const l=e*a-f*h,k=f*g-d*a,m=d*h-e*g;c[0]=g+l*b+2*(e*m-f*k);c[1]=h+k*b+2*(f*l-d*m);c[2]=a+m*b+2*(d*k-e*l);return c},truncate:function(a,b,c){c=c||new u(3);return da(a)>b?bb(a,b,c):wa(a,c)},zero:function(a){a=a||new u(3);a[0]=0;a[1]=0;a[2]=0;return a}};let x=Float32Array,B,D,z;var Jb={__proto__:null,aim:function(a,b,c,d){d=d||new x(16);B=B||H();D=D||H();z=z||H();N(ca(b,a,z),z);N(P(c,z,B),B);N(P(z,B,D),D);d[0]=B[0];d[1]=B[1];d[2]=B[2];d[3]=0;d[4]=D[0];d[5]=D[1];d[6]=
D[2];d[7]=0;d[8]=z[0];d[9]=z[1];d[10]=z[2];d[11]=0;d[12]=a[0];d[13]=a[1];d[14]=a[2];d[15]=1;return d},axisRotate:jb,axisRotation:ib,cameraAim:function(a,b,c,d){d=d||new x(16);B=B||H();D=D||H();z=z||H();N(ca(a,b,z),z);N(P(c,z,B),B);N(P(z,B,D),D);d[0]=B[0];d[1]=B[1];d[2]=B[2];d[3]=0;d[4]=D[0];d[5]=D[1];d[6]=D[2];d[7]=0;d[8]=z[0];d[9]=z[1];d[10]=z[2];d[11]=0;d[12]=a[0];d[13]=a[1];d[14]=a[2];d[15]=1;return d},clone:xa,copy:xa,create:function(a,b,c,d,e,f,g,h,l,k,m,n,q,r,w,v){const p=new x(16);void 0!==
a&&(p[0]=a,void 0!==b&&(p[1]=b,void 0!==c&&(p[2]=c,void 0!==d&&(p[3]=d,void 0!==e&&(p[4]=e,void 0!==f&&(p[5]=f,void 0!==g&&(p[6]=g,void 0!==h&&(p[7]=h,void 0!==l&&(p[8]=l,void 0!==k&&(p[9]=k,void 0!==m&&(p[10]=m,void 0!==n&&(p[11]=n,void 0!==q&&(p[12]=q,void 0!==r&&(p[13]=r,void 0!==w&&(p[14]=w,void 0!==v&&(p[15]=v))))))))))))))));return p},determinant:function(a){const b=a[1];var c=a[2],d=a[3];const e=a[5],f=a[6],g=a[7],h=a[9];var l=a[10],k=a[11];const m=a[13];var n=a[14],q=a[15];const r=l*q,w=n*
k,v=f*q,p=n*g,E=f*k,F=l*g;q*=c;n*=d;k*=c;l*=d;c*=g;d*=f;return a[0]*(r*e+p*h+E*m-(w*e+v*h+F*m))+a[4]*(w*b+q*h+l*m-(r*b+n*h+k*m))+a[8]*(v*b+n*e+c*m-(p*b+q*e+d*m))+a[12]*(F*b+k*e+d*h-(E*b+l*e+c*h))},equals:function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]},equalsApproximately:function(a,b){return Math.abs(a[0]-b[0])<
t&&Math.abs(a[1]-b[1])<t&&Math.abs(a[2]-b[2])<t&&Math.abs(a[3]-b[3])<t&&Math.abs(a[4]-b[4])<t&&Math.abs(a[5]-b[5])<t&&Math.abs(a[6]-b[6])<t&&Math.abs(a[7]-b[7])<t&&Math.abs(a[8]-b[8])<t&&Math.abs(a[9]-b[9])<t&&Math.abs(a[10]-b[10])<t&&Math.abs(a[11]-b[11])<t&&Math.abs(a[12]-b[12])<t&&Math.abs(a[13]-b[13])<t&&Math.abs(a[14]-b[14])<t&&Math.abs(a[15]-b[15])<t},fromMat3:function(a,b){b=b||new x(16);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=0;b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=0;b[8]=a[8];b[9]=a[9];b[10]=a[10];
b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b},fromQuat:function(a,b){b=b||new x(16);var c=a[0],d=a[1],e=a[2];a=a[3];var f=c+c,g=d+d;const h=e+e;c*=f;const l=d*f;d*=g;const k=e*f,m=e*g;e*=h;f*=a;g*=a;a*=h;b[0]=1-d-e;b[1]=l+a;b[2]=k-g;b[3]=0;b[4]=l-a;b[5]=1-c-e;b[6]=m+f;b[7]=0;b[8]=k+g;b[9]=m-f;b[10]=1-c-d;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b},frustum:function(a,b,c,d,e,f,g){g=g||new x(16);const h=b-a,l=d-c,k=e-f;g[0]=2*e/h;g[1]=0;g[2]=0;g[3]=0;g[4]=0;g[5]=2*e/l;g[6]=0;g[7]=0;g[8]=(a+
b)/h;g[9]=(d+c)/l;g[10]=f/k;g[11]=-1;g[12]=0;g[13]=0;g[14]=e*f/k;g[15]=0;return g},getAxis:function(a,b,c){c=c||H();b*=4;c[0]=a[b+0];c[1]=a[b+1];c[2]=a[b+2];return c},getScaling:function(a,b){b=b||H();const c=a[0],d=a[1],e=a[2],f=a[4],g=a[5],h=a[6],l=a[8],k=a[9];a=a[10];b[0]=Math.sqrt(c*c+d*d+e*e);b[1]=Math.sqrt(f*f+g*g+h*h);b[2]=Math.sqrt(l*l+k*k+a*a);return b},getTranslation:function(a,b){b=b||H();b[0]=a[12];b[1]=a[13];b[2]=a[14];return b},identity:db,inverse:eb,invert:eb,lookAt:function(a,b,c,
d){d=d||new x(16);B=B||H();D=D||H();z=z||H();N(ca(a,b,z),z);N(P(c,z,B),B);N(P(z,B,D),D);d[0]=B[0];d[1]=D[0];d[2]=z[0];d[3]=0;d[4]=B[1];d[5]=D[1];d[6]=z[1];d[7]=0;d[8]=B[2];d[9]=D[2];d[10]=z[2];d[11]=0;d[12]=-(B[0]*a[0]+B[1]*a[1]+B[2]*a[2]);d[13]=-(D[0]*a[0]+D[1]*a[1]+D[2]*a[2]);d[14]=-(z[0]*a[0]+z[1]*a[1]+z[2]*a[2]);d[15]=1;return d},mul:hb,multiply:hb,negate:function(a,b){b=b||new x(16);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=-a[3];b[4]=-a[4];b[5]=-a[5];b[6]=-a[6];b[7]=-a[7];b[8]=-a[8];b[9]=-a[9];
b[10]=-a[10];b[11]=-a[11];b[12]=-a[12];b[13]=-a[13];b[14]=-a[14];b[15]=-a[15];return b},ortho:function(a,b,c,d,e,f,g){g=g||new x(16);g[0]=2/(b-a);g[1]=0;g[2]=0;g[3]=0;g[4]=0;g[5]=2/(d-c);g[6]=0;g[7]=0;g[8]=0;g[9]=0;g[10]=1/(e-f);g[11]=0;g[12]=(b+a)/(a-b);g[13]=(d+c)/(c-d);g[14]=e/(e-f);g[15]=1;return g},perspective:function(a,b,c,d,e){e=e||new x(16);a=Math.tan(.5*Math.PI-.5*a);e[0]=a/b;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=a;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[11]=-1;e[12]=0;e[13]=0;e[15]=0;Infinity===d?(e[10]=
-1,e[14]=-c):(b=1/(c-d),e[10]=d*b,e[14]=d*c*b);return e},rotate:jb,rotateX:function(a,b,c){c=c||new x(16);const d=a[4],e=a[5],f=a[6],g=a[7],h=a[8],l=a[9],k=a[10],m=a[11],n=Math.cos(b);b=Math.sin(b);c[4]=n*d+b*h;c[5]=n*e+b*l;c[6]=n*f+b*k;c[7]=n*g+b*m;c[8]=n*h-b*d;c[9]=n*l-b*e;c[10]=n*k-b*f;c[11]=n*m-b*g;a!==c&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]);return c},rotateY:function(a,b,c){c=c||new x(16);const d=a[0],e=a[1],f=a[2],g=a[3],h=a[8],l=a[9],k=a[10],
m=a[11],n=Math.cos(b);b=Math.sin(b);c[0]=n*d-b*h;c[1]=n*e-b*l;c[2]=n*f-b*k;c[3]=n*g-b*m;c[8]=n*h+b*d;c[9]=n*l+b*e;c[10]=n*k+b*f;c[11]=n*m+b*g;a!==c&&(c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]);return c},rotateZ:function(a,b,c){c=c||new x(16);const d=a[0],e=a[1],f=a[2],g=a[3],h=a[4],l=a[5],k=a[6],m=a[7],n=Math.cos(b);b=Math.sin(b);c[0]=n*d+b*h;c[1]=n*e+b*l;c[2]=n*f+b*k;c[3]=n*g+b*m;c[4]=n*h-b*d;c[5]=n*l-b*e;c[6]=n*k-b*f;c[7]=n*m-b*g;a!==c&&(c[8]=a[8],c[9]=
a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]);return c},rotation:ib,rotationX:function(a,b){b=b||new x(16);const c=Math.cos(a);a=Math.sin(a);b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=c;b[6]=a;b[7]=0;b[8]=0;b[9]=-a;b[10]=c;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b},rotationY:function(a,b){b=b||new x(16);const c=Math.cos(a);a=Math.sin(a);b[0]=c;b[1]=0;b[2]=-a;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=a;b[9]=0;b[10]=c;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b},
rotationZ:function(a,b){b=b||new x(16);const c=Math.cos(a);a=Math.sin(a);b[0]=c;b[1]=a;b[2]=0;b[3]=0;b[4]=-a;b[5]=c;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b},scale:function(a,b,c){c=c||new x(16);const d=b[0],e=b[1];b=b[2];c[0]=d*a[0];c[1]=d*a[1];c[2]=d*a[2];c[3]=d*a[3];c[4]=e*a[4];c[5]=e*a[5];c[6]=e*a[6];c[7]=e*a[7];c[8]=b*a[8];c[9]=b*a[9];c[10]=b*a[10];c[11]=b*a[11];a!==c&&(c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]);return c},scaling:function(a,b){b=
b||new x(16);b[0]=a[0];b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=a[1];b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=a[2];b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b},set:function(a,b,c,d,e,f,g,h,l,k,m,n,q,r,w,v,p){p=p||new x(16);p[0]=a;p[1]=b;p[2]=c;p[3]=d;p[4]=e;p[5]=f;p[6]=g;p[7]=h;p[8]=l;p[9]=k;p[10]=m;p[11]=n;p[12]=q;p[13]=r;p[14]=w;p[15]=v;return p},setAxis:function(a,b,c,d){d!==a&&(d=xa(a,d));a=4*c;d[a+0]=b[0];d[a+1]=b[1];d[a+2]=b[2];return d},setDefaultType:cb,setTranslation:function(a,b,c){c=c||db();a!==
c&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11]);c[12]=b[0];c[13]=b[1];c[14]=b[2];c[15]=1;return c},translate:function(a,b,c){c=c||new x(16);const d=b[0],e=b[1];b=b[2];const f=a[0],g=a[1],h=a[2],l=a[3],k=a[4],m=a[5],n=a[6],q=a[7],r=a[8],w=a[9],v=a[10],p=a[11],E=a[12],F=a[13],I=a[14],J=a[15];a!==c&&(c[0]=f,c[1]=g,c[2]=h,c[3]=l,c[4]=k,c[5]=m,c[6]=n,c[7]=q,c[8]=r,c[9]=w,c[10]=v,c[11]=p);c[12]=f*d+k*e+r*b+E;c[13]=g*d+m*e+
w*b+F;c[14]=h*d+n*e+v*b+I;c[15]=l*d+q*e+p*b+J;return c},translation:function(a,b){b=b||new x(16);b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=a[0];b[13]=a[1];b[14]=a[2];b[15]=1;return b},transpose:function(a,b){b=b||new x(16);if(b===a){var c=a[1];a[1]=a[4];a[4]=c;c=a[2];a[2]=a[8];a[8]=c;c=a[3];a[3]=a[12];a[12]=c;c=a[6];a[6]=a[9];a[9]=c;c=a[7];a[7]=a[13];a[13]=c;c=a[11];a[11]=a[14];a[14]=c;return b}c=a[1];const d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],l=a[7],
k=a[8],m=a[9],n=a[10],q=a[11],r=a[12],w=a[13],v=a[14],p=a[15];b[0]=a[0];b[1]=f;b[2]=k;b[3]=r;b[4]=c;b[5]=g;b[6]=m;b[7]=w;b[8]=d;b[9]=h;b[10]=n;b[11]=v;b[12]=e;b[13]=l;b[14]=q;b[15]=p;return b},uniformScale:function(a,b,c){c=c||new x(16);c[0]=b*a[0];c[1]=b*a[1];c[2]=b*a[2];c[3]=b*a[3];c[4]=b*a[4];c[5]=b*a[5];c[6]=b*a[6];c[7]=b*a[7];c[8]=b*a[8];c[9]=b*a[9];c[10]=b*a[10];c[11]=b*a[11];a!==c&&(c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]);return c},uniformScaling:function(a,b){b=b||new x(16);b[0]=
a;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=a;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=a;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}};let C=Float32Array,O,Ba,Ca,oa,pa;var Kb={__proto__:null,add:function(a,b,c){c=c||new C(4);c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];return c},angle:function(a,b){a=rb(a,b);return Math.acos(2*a*a-1)},clone:ob,conjugate:function(a,b){b=b||new C(4);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=a[3];return b},copy:ob,create:lb,divScalar:function(a,b,c){c=c||new C(4);c[0]=
a[0]/b;c[1]=a[1]/b;c[2]=a[2]/b;c[3]=a[3]/b;return c},dot:rb,equals:function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]},equalsApproximately:function(a,b){return Math.abs(a[0]-b[0])<t&&Math.abs(a[1]-b[1])<t&&Math.abs(a[2]-b[2])<t&&Math.abs(a[3]-b[3])<t},fromAxisAngle:mb,fromEuler:function(a,b,c,d,e){e=e||new C(4);a*=.5;var f=.5*b;b=.5*c;c=Math.sin(a);a=Math.cos(a);const g=Math.sin(f);f=Math.cos(f);const h=Math.sin(b);b=Math.cos(b);switch(d){case "xyz":e[0]=c*f*b+a*g*h;e[1]=a*g*
b-c*f*h;e[2]=a*f*h+c*g*b;e[3]=a*f*b-c*g*h;break;case "xzy":e[0]=c*f*b-a*g*h;e[1]=a*g*b-c*f*h;e[2]=a*f*h+c*g*b;e[3]=a*f*b+c*g*h;break;case "yxz":e[0]=c*f*b+a*g*h;e[1]=a*g*b-c*f*h;e[2]=a*f*h-c*g*b;e[3]=a*f*b+c*g*h;break;case "yzx":e[0]=c*f*b+a*g*h;e[1]=a*g*b+c*f*h;e[2]=a*f*h-c*g*b;e[3]=a*f*b-c*g*h;break;case "zxy":e[0]=c*f*b-a*g*h;e[1]=a*g*b+c*f*h;e[2]=a*f*h+c*g*b;e[3]=a*f*b-c*g*h;break;case "zyx":e[0]=c*f*b-a*g*h;e[1]=a*g*b+c*f*h;e[2]=a*f*h-c*g*b;e[3]=a*f*b+c*g*h;break;default:throw Error(`Unknown rotation order: ${d}`);
}return e},fromMat:function(a,b){b=b||new C(4);var c=a[0]+a[5]+a[10];if(0<c)c=Math.sqrt(c+1),b[3]=.5*c,c=.5/c,b[0]=(a[6]-a[9])*c,b[1]=(a[8]-a[2])*c,b[2]=(a[1]-a[4])*c;else{c=0;a[5]>a[0]&&(c=1);a[10]>a[4*c+c]&&(c=2);const e=(c+1)%3,f=(c+2)%3;var d=Math.sqrt(a[4*c+c]-a[4*e+e]-a[4*f+f]+1);b[c]=.5*d;d=.5/d;b[3]=(a[4*e+f]-a[4*f+e])*d;b[e]=(a[4*e+c]+a[4*c+e])*d;b[f]=(a[4*f+c]+a[4*c+f])*d}return b},fromValues:lb,identity:function(a){a=a||new C(4);a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a},inverse:function(a,
b){b=b||new C(4);const c=a[0],d=a[1],e=a[2];a=a[3];var f=c*c+d*d+e*e+a*a;f=f?1/f:0;b[0]=-c*f;b[1]=-d*f;b[2]=-e*f;b[3]=a*f;return b},len:sb,lenSq:tb,length:sb,lengthSq:tb,lerp:function(a,b,c,d){d=d||new C(4);d[0]=a[0]+c*(b[0]-a[0]);d[1]=a[1]+c*(b[1]-a[1]);d[2]=a[2]+c*(b[2]-a[2]);d[3]=a[3]+c*(b[3]-a[3]);return d},mul:nb,mulScalar:qb,multiply:nb,normalize:ub,rotateX:function(a,b,c){c=c||new C(4);var d=.5*b;b=a[0];const e=a[1],f=a[2];a=a[3];const g=Math.sin(d);d=Math.cos(d);c[0]=b*d+a*g;c[1]=e*d+f*g;
c[2]=f*d-e*g;c[3]=a*d-b*g;return c},rotateY:function(a,b,c){c=c||new C(4);var d=.5*b;b=a[0];const e=a[1],f=a[2];a=a[3];const g=Math.sin(d);d=Math.cos(d);c[0]=b*d-f*g;c[1]=e*d+a*g;c[2]=f*d+b*g;c[3]=a*d-e*g;return c},rotateZ:function(a,b,c){c=c||new C(4);var d=.5*b;b=a[0];const e=a[1],f=a[2];a=a[3];const g=Math.sin(d);d=Math.cos(d);c[0]=b*d+e*g;c[1]=e*d-b*g;c[2]=f*d+a*g;c[3]=a*d-f*g;return c},rotationTo:function(a,b,c){c=c||new C(4);O=O||H();Ba=Ba||H(1,0,0);Ca=Ca||H(0,1,0);const d=va(a,b);if(-.999999>
d)return P(Ba,a,O),1E-6>da(O)&&P(Ca,a,O),N(O,O),mb(O,Math.PI,c),c;if(.999999<d)return c[0]=0,c[1]=0,c[2]=0,c[3]=1,c;P(a,b,O);c[0]=O[0];c[1]=O[1];c[2]=O[2];c[3]=1+d;return ub(c,c)},scale:qb,set:function(a,b,c,d,e){e=e||new C(4);e[0]=a;e[1]=b;e[2]=c;e[3]=d;return e},setDefaultType:kb,slerp:na,sqlerp:function(a,b,c,d,e,f){f=f||new C(4);oa=oa||new C(4);pa=pa||new C(4);na(a,d,e,oa);na(b,c,e,pa);na(oa,pa,2*e*(1-e),f);return f},sub:pb,subtract:pb,toAxisAngle:function(a,b){b=b||H(4);const c=2*Math.acos(a[3]),
d=Math.sin(.5*c);d>t?(b[0]=a[0]/d,b[1]=a[1]/d,b[2]=a[2]/d):(b[0]=1,b[1]=0,b[2]=0);return{angle:c,axis:b}}};let A=Float32Array;var Lb={__proto__:null,add:function(a,b,c){c=c||new A(4);c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];return c},addScaled:function(a,b,c,d){d=d||new A(4);d[0]=a[0]+b[0]*c;d[1]=a[1]+b[1]*c;d[2]=a[2]+b[2]*c;d[3]=a[3]+b[3]*c;return d},ceil:function(a,b){b=b||new A(4);b[0]=Math.ceil(a[0]);b[1]=Math.ceil(a[1]);b[2]=Math.ceil(a[2]);b[3]=Math.ceil(a[3]);return b},clamp:function(a,
b=0,c=1,d){d=d||new A(4);d[0]=Math.min(c,Math.max(b,a[0]));d[1]=Math.min(c,Math.max(b,a[1]));d[2]=Math.min(c,Math.max(b,a[2]));d[3]=Math.min(c,Math.max(b,a[3]));return d},clone:Aa,copy:Aa,create:wb,dist:Bb,distSq:Cb,distance:Bb,distanceSq:Cb,div:Fb,divScalar:function(a,b,c){c=c||new A(4);c[0]=a[0]/b;c[1]=a[1]/b;c[2]=a[2]/b;c[3]=a[3]/b;return c},divide:Fb,dot:function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]},equals:function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]},
equalsApproximately:function(a,b){return Math.abs(a[0]-b[0])<t&&Math.abs(a[1]-b[1])<t&&Math.abs(a[2]-b[2])<t&&Math.abs(a[3]-b[3])<t},floor:function(a,b){b=b||new A(4);b[0]=Math.floor(a[0]);b[1]=Math.floor(a[1]);b[2]=Math.floor(a[2]);b[3]=Math.floor(a[3]);return b},fromValues:wb,inverse:zb,invert:zb,len:za,lenSq:Ab,length:za,lengthSq:Ab,lerp:yb,lerpV:function(a,b,c,d){d=d||new A(4);d[0]=a[0]+c[0]*(b[0]-a[0]);d[1]=a[1]+c[1]*(b[1]-a[1]);d[2]=a[2]+c[2]*(b[2]-a[2]);d[3]=a[3]+c[3]*(b[3]-a[3]);return d},
max:function(a,b,c){c=c||new A(4);c[0]=Math.max(a[0],b[0]);c[1]=Math.max(a[1],b[1]);c[2]=Math.max(a[2],b[2]);c[3]=Math.max(a[3],b[3]);return c},midpoint:function(a,b,c){c=c||new A(4);return yb(a,b,.5,c)},min:function(a,b,c){c=c||new A(4);c[0]=Math.min(a[0],b[0]);c[1]=Math.min(a[1],b[1]);c[2]=Math.min(a[2],b[2]);c[3]=Math.min(a[3],b[3]);return c},mul:Eb,mulScalar:ya,multiply:Eb,negate:function(a,b){b=b||new A(4);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=-a[3];return b},normalize:Db,round:function(a,b){b=
b||new A(4);b[0]=Math.round(a[0]);b[1]=Math.round(a[1]);b[2]=Math.round(a[2]);b[3]=Math.round(a[3]);return b},scale:ya,set:function(a,b,c,d,e){e=e||new A(4);e[0]=a;e[1]=b;e[2]=c;e[3]=d;return e},setDefaultType:vb,setLength:Gb,sub:xb,subtract:xb,transformMat4:function(a,b,c){c=c||new A(4);const d=a[0],e=a[1],f=a[2];a=a[3];c[0]=b[0]*d+b[4]*e+b[8]*f+b[12]*a;c[1]=b[1]*d+b[5]*e+b[9]*f+b[13]*a;c[2]=b[2]*d+b[6]*e+b[10]*f+b[14]*a;c[3]=b[3]*d+b[7]*e+b[11]*f+b[15]*a;return c},truncate:function(a,b,c){c=c||
new A(4);return za(a)>b?Gb(a,b,c):Aa(a,c)},zero:function(a){a=a||new A(4);a[0]=0;a[1]=0;a[2]=0;a[3]=0;return a}};M.mat3={__proto__:null,clone:ta,copy:ta,create:function(a,b,c,d,e,f,g,h,l){const k=G();k[3]=0;k[7]=0;k[11]=0;void 0!==a&&(k[0]=a,void 0!==b&&(k[1]=b,void 0!==c&&(k[2]=c,void 0!==d&&(k[4]=d,void 0!==e&&(k[5]=e,void 0!==f&&(k[6]=f,void 0!==g&&(k[8]=g,void 0!==h&&(k[9]=h,void 0!==l&&(k[10]=l)))))))));return k},determinant:function(a){const b=a[1],c=a[2],d=a[5],e=a[6],f=a[9],g=a[10];return a[0]*
(d*g-f*e)-a[4]*(b*g-f*c)+a[8]*(b*e-d*c)},equals:function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]},equalsApproximately:function(a,b){return Math.abs(a[0]-b[0])<t&&Math.abs(a[1]-b[1])<t&&Math.abs(a[2]-b[2])<t&&Math.abs(a[4]-b[4])<t&&Math.abs(a[5]-b[5])<t&&Math.abs(a[6]-b[6])<t&&Math.abs(a[8]-b[8])<t&&Math.abs(a[9]-b[9])<t&&Math.abs(a[10]-b[10])<t},fromMat4:function(a,b){b=b||G();b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=
0;b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=0;b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=0;return b},fromQuat:function(a,b){b=b||G();var c=a[0],d=a[1],e=a[2];a=a[3];var f=c+c,g=d+d;const h=e+e;c*=f;const l=d*f;d*=g;const k=e*f,m=e*g;e*=h;f*=a;g*=a;a*=h;b[0]=1-d-e;b[1]=l+a;b[2]=k-g;b[3]=0;b[4]=l-a;b[5]=1-c-e;b[6]=m+f;b[7]=0;b[8]=k+g;b[9]=m-f;b[10]=1-c-d;b[11]=0;return b},getAxis:function(a,b,c){c=c||ba();b*=4;c[0]=a[b+0];c[1]=a[b+1];return c},getScaling:function(a,b){b=b||ba();const c=a[0],d=a[1],e=a[4];a=a[5];
b[0]=Math.sqrt(c*c+d*d);b[1]=Math.sqrt(e*e+a*a);return b},getTranslation:function(a,b){b=b||ba();b[0]=a[8];b[1]=a[9];return b},identity:Sa,inverse:Ta,invert:Ta,mul:Ua,multiply:Ua,negate:function(a,b){b=b||G();b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[4]=-a[4];b[5]=-a[5];b[6]=-a[6];b[8]=-a[8];b[9]=-a[9];b[10]=-a[10];return b},rotate:function(a,b,c){c=c||G();const d=a[0],e=a[1],f=a[2],g=a[4],h=a[5],l=a[6],k=Math.cos(b);b=Math.sin(b);c[0]=k*d+b*g;c[1]=k*e+b*h;c[2]=k*f+b*l;c[4]=k*g-b*d;c[5]=k*h-b*e;c[6]=k*l-
b*f;a!==c&&(c[8]=a[8],c[9]=a[9],c[10]=a[10]);return c},rotation:function(a,b){b=b||G();const c=Math.cos(a);a=Math.sin(a);b[0]=c;b[1]=a;b[2]=0;b[4]=-a;b[5]=c;b[6]=0;b[8]=0;b[9]=0;b[10]=1;return b},scale:function(a,b,c){c=c||G();const d=b[0];b=b[1];c[0]=d*a[0];c[1]=d*a[1];c[2]=d*a[2];c[4]=b*a[4];c[5]=b*a[5];c[6]=b*a[6];a!==c&&(c[8]=a[8],c[9]=a[9],c[10]=a[10]);return c},scaling:function(a,b){b=b||G();b[0]=a[0];b[1]=0;b[2]=0;b[4]=0;b[5]=a[1];b[6]=0;b[8]=0;b[9]=0;b[10]=1;return b},set:function(a,b,c,d,
e,f,g,h,l,k){k=k||G();k[0]=a;k[1]=b;k[2]=c;k[3]=0;k[4]=d;k[5]=e;k[6]=f;k[7]=0;k[8]=g;k[9]=h;k[10]=l;k[11]=0;return k},setAxis:function(a,b,c,d){d!==a&&(d=ta(a,d));a=4*c;d[a+0]=b[0];d[a+1]=b[1];return d},setDefaultType:Pa,setTranslation:function(a,b,c){c=c||Sa();a!==c&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[4]=a[4],c[5]=a[5],c[6]=a[6]);c[8]=b[0];c[9]=b[1];c[10]=1;return c},translate:function(a,b,c){c=c||G();const d=b[0];b=b[1];const e=a[0],f=a[1],g=a[2],h=a[4],l=a[5],k=a[6],m=a[8],n=a[9],q=a[10];a!==c&&
(c[0]=e,c[1]=f,c[2]=g,c[4]=h,c[5]=l,c[6]=k);c[8]=e*d+h*b+m;c[9]=f*d+l*b+n;c[10]=g*d+k*b+q;return c},translation:function(a,b){b=b||G();b[0]=1;b[1]=0;b[2]=0;b[4]=0;b[5]=1;b[6]=0;b[8]=a[0];b[9]=a[1];b[10]=1;return b},transpose:function(a,b){b=b||G();if(b===a){var c=a[1];a[1]=a[4];a[4]=c;c=a[2];a[2]=a[8];a[8]=c;c=a[6];a[6]=a[9];a[9]=c;return b}c=a[1];const d=a[2],e=a[4],f=a[5],g=a[6],h=a[8],l=a[9],k=a[10];b[0]=a[0];b[1]=e;b[2]=h;b[4]=c;b[5]=f;b[6]=l;b[8]=d;b[9]=g;b[10]=k;return b},uniformScale:function(a,
b,c){c=c||G();c[0]=b*a[0];c[1]=b*a[1];c[2]=b*a[2];c[4]=b*a[4];c[5]=b*a[5];c[6]=b*a[6];a!==c&&(c[8]=a[8],c[9]=a[9],c[10]=a[10]);return c},uniformScaling:function(a,b){b=b||G();b[0]=a;b[1]=0;b[2]=0;b[4]=0;b[5]=a;b[6]=0;b[8]=0;b[9]=0;b[10]=1;return b}};M.mat4=Jb;M.quat=Kb;M.setDefaultType=function(a){Pa(a);cb(a);kb(a);aa(a);Da(a);vb(a)};M.utils={__proto__:null,get EPSILON(){return t},degToRad:function(a){return a*Math.PI/180},euclideanModulo:function(a,b){return(a%b+b)%b},inverseLerp:function(a,b,c){return Math.abs(b-
a)<t?a:(c-a)/(b-a)},lerp:function(a,b,c){return a+(b-a)*c},radToDeg:function(a){return 180*a/Math.PI},setEpsilon:function(a){const b=t;t=a;return b}};M.vec2=Hb;M.vec3=Ib;M.vec4=Lb});
