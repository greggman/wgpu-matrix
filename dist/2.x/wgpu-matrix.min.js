!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((n="undefined"!=typeof globalThis?globalThis:n||self).wgpuMatrix={})}(this,(function(n){"use strict";let t=1e-6;var r={__proto__:null,get EPSILON(){return t},degToRad:function(n){return n*Math.PI/180},euclideanModulo:function(n,t){return(n%t+t)%t},inverseLerp:function(n,r,e){const o=r-n;return Math.abs(r-n)<t?n:(e-n)/o},lerp:function(n,t,r){return n+(t-n)*r},radToDeg:function(n){return 180*n/Math.PI},setEpsilon:function(n){const r=t;return t=n,r}};let e=Float32Array;function o(n){const t=e;return e=n,t}function u(n=0,t=0){const r=new e(2);return void 0!==n&&(r[0]=n,void 0!==t&&(r[1]=t)),r}let a=Float32Array;function i(n){const t=a;return a=n,t}function c(n,t,r){const e=new a(3);return void 0!==n&&(e[0]=n,void 0!==t&&(e[1]=t,void 0!==r&&(e[2]=r))),e}function s(n,t,r){return(r=r||new e(2))[0]=n[0]-t[0],r[1]=n[1]-t[1],r}function f(n,t,r,o){return(o=o||new e(2))[0]=n[0]+r*(t[0]-n[0]),o[1]=n[1]+r*(t[1]-n[1]),o}function h(n,t,r){return(r=r||new e(2))[0]=n[0]*t,r[1]=n[1]*t,r}function l(n,t){return(t=t||new e(2))[0]=1/n[0],t[1]=1/n[1],t}function M(n,t){return n[0]*t[0]+n[1]*t[1]}function w(n){const t=n[0],r=n[1];return Math.sqrt(t*t+r*r)}function d(n){const t=n[0],r=n[1];return t*t+r*r}function m(n,t){const r=n[0]-t[0],e=n[1]-t[1];return Math.sqrt(r*r+e*e)}function v(n,t){const r=n[0]-t[0],e=n[1]-t[1];return r*r+e*e}function p(n,t){t=t||new e(2);const r=n[0],o=n[1],u=Math.sqrt(r*r+o*o);return u>1e-5?(t[0]=r/u,t[1]=o/u):(t[0]=0,t[1]=0),t}function b(n,t){return(t=t||new e(2))[0]=n[0],t[1]=n[1],t}function q(n,t,r){return(r=r||new e(2))[0]=n[0]*t[0],r[1]=n[1]*t[1],r}function y(n,t,r){return(r=r||new e(2))[0]=n[0]/t[0],r[1]=n[1]/t[1],r}function x(n,t,r){return p(n,r=r||new e(2)),h(r,t,r)}var g={__proto__:null,add:function(n,t,r){return(r=r||new e(2))[0]=n[0]+t[0],r[1]=n[1]+t[1],r},addScaled:function(n,t,r,o){return(o=o||new e(2))[0]=n[0]+t[0]*r,o[1]=n[1]+t[1]*r,o},angle:function(n,t){const r=n[0],e=n[1],o=t[0],u=t[1],a=Math.sqrt(r*r+e*e)*Math.sqrt(o*o+u*u),i=a&&M(n,t)/a;return Math.acos(i)},ceil:function(n,t){return(t=t||new e(2))[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t},clamp:function(n,t=0,r=1,o){return(o=o||new e(2))[0]=Math.min(r,Math.max(t,n[0])),o[1]=Math.min(r,Math.max(t,n[1])),o},clone:b,copy:b,create:u,cross:function(n,t,r){r=r||new a(3);const e=n[0]*t[1]-n[1]*t[0];return r[0]=0,r[1]=0,r[2]=e,r},dist:m,distSq:v,distance:m,distanceSq:v,div:y,divScalar:function(n,t,r){return(r=r||new e(2))[0]=n[0]/t,r[1]=n[1]/t,r},divide:y,dot:M,equals:function(n,t){return n[0]===t[0]&&n[1]===t[1]},equalsApproximately:function(n,r){return Math.abs(n[0]-r[0])<t&&Math.abs(n[1]-r[1])<t},floor:function(n,t){return(t=t||new e(2))[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t},fromValues:u,inverse:l,invert:l,len:w,lenSq:d,length:w,lengthSq:d,lerp:f,lerpV:function(n,t,r,o){return(o=o||new e(2))[0]=n[0]+r[0]*(t[0]-n[0]),o[1]=n[1]+r[1]*(t[1]-n[1]),o},max:function(n,t,r){return(r=r||new e(2))[0]=Math.max(n[0],t[0]),r[1]=Math.max(n[1],t[1]),r},midpoint:function(n,t,r){return f(n,t,.5,r=r||new e(2))},min:function(n,t,r){return(r=r||new e(2))[0]=Math.min(n[0],t[0]),r[1]=Math.min(n[1],t[1]),r},mul:q,mulScalar:h,multiply:q,negate:function(n,t){return(t=t||new e(2))[0]=-n[0],t[1]=-n[1],t},normalize:p,random:function(n=1,t){t=t||new e(2);const r=2*Math.random()*Math.PI;return t[0]=Math.cos(r)*n,t[1]=Math.sin(r)*n,t},rotate:function(n,t,r,o){o=o||new e(2);const u=n[0]-t[0],a=n[1]-t[1],i=Math.sin(r),c=Math.cos(r);return o[0]=u*c-a*i+t[0],o[1]=u*i+a*c+t[1],o},round:function(n,t){return(t=t||new e(2))[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t},scale:h,set:function(n,t,r){return(r=r||new e(2))[0]=n,r[1]=t,r},setDefaultType:o,setLength:x,sub:s,subtract:s,transformMat3:function(n,t,r){r=r||new e(2);const o=n[0],u=n[1];return r[0]=t[0]*o+t[4]*u+t[8],r[1]=t[1]*o+t[5]*u+t[9],r},transformMat4:function(n,t,r){r=r||new e(2);const o=n[0],u=n[1];return r[0]=o*t[0]+u*t[4]+t[12],r[1]=o*t[1]+u*t[5]+t[13],r},truncate:function(n,t,r){return r=r||new e(2),w(n)>t?x(n,t,r):b(n,r)},zero:function(n){return(n=n||new e(2))[0]=0,n[1]=0,n}};let S=Float32Array;const A=new Map([[Float32Array,()=>new Float32Array(12)],[Float64Array,()=>new Float64Array(12)],[Array,()=>new Array(12).fill(0)]]);let _=A.get(Float32Array);function T(n){const t=S;return S=n,_=A.get(n),t}function z(n,t){return(t=t||_())[0]=n[0],t[1]=n[1],t[2]=n[2],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[8]=n[8],t[9]=n[9],t[10]=n[10],t}function F(n){return(n=n||_())[0]=1,n[1]=0,n[2]=0,n[4]=0,n[5]=1,n[6]=0,n[8]=0,n[9]=0,n[10]=1,n}function k(n,t){t=t||_();const r=n[0],e=n[1],o=n[2],u=n[4],a=n[5],i=n[6],c=n[8],s=n[9],f=n[10],h=f*a-i*s,l=-f*u+i*c,M=s*u-a*c,w=1/(r*h+e*l+o*M);return t[0]=h*w,t[1]=(-f*e+o*s)*w,t[2]=(i*e-o*a)*w,t[4]=l*w,t[5]=(f*r-o*c)*w,t[6]=(-i*r+o*u)*w,t[8]=M*w,t[9]=(-s*r+e*c)*w,t[10]=(a*r-e*u)*w,t}function D(n,t,r){r=r||_();const e=n[0],o=n[1],u=n[2],a=n[4],i=n[5],c=n[6],s=n[8],f=n[9],h=n[10],l=t[0],M=t[1],w=t[2],d=t[4],m=t[5],v=t[6],p=t[8],b=t[9],q=t[10];return r[0]=e*l+a*M+s*w,r[1]=o*l+i*M+f*w,r[2]=u*l+c*M+h*w,r[4]=e*d+a*m+s*v,r[5]=o*d+i*m+f*v,r[6]=u*d+c*m+h*v,r[8]=e*p+a*b+s*q,r[9]=o*p+i*b+f*q,r[10]=u*p+c*b+h*q,r}var I={__proto__:null,clone:z,copy:z,create:function(n,t,r,e,o,u,a,i,c){const s=_();return s[3]=0,s[7]=0,s[11]=0,void 0!==n&&(s[0]=n,void 0!==t&&(s[1]=t,void 0!==r&&(s[2]=r,void 0!==e&&(s[4]=e,void 0!==o&&(s[5]=o,void 0!==u&&(s[6]=u,void 0!==a&&(s[8]=a,void 0!==i&&(s[9]=i,void 0!==c&&(s[10]=c))))))))),s},determinant:function(n){const t=n[0],r=n[1],e=n[2],o=n[4],u=n[5],a=n[6],i=n[8],c=n[9],s=n[10];return t*(u*s-c*a)-o*(r*s-c*e)+i*(r*a-u*e)},equals:function(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]&&n[4]===t[4]&&n[5]===t[5]&&n[6]===t[6]&&n[8]===t[8]&&n[9]===t[9]&&n[10]===t[10]},equalsApproximately:function(n,r){return Math.abs(n[0]-r[0])<t&&Math.abs(n[1]-r[1])<t&&Math.abs(n[2]-r[2])<t&&Math.abs(n[4]-r[4])<t&&Math.abs(n[5]-r[5])<t&&Math.abs(n[6]-r[6])<t&&Math.abs(n[8]-r[8])<t&&Math.abs(n[9]-r[9])<t&&Math.abs(n[10]-r[10])<t},fromMat4:function(n,t){return(t=t||_())[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=0,t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=0,t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=0,t},fromQuat:function(n,t){t=t||_();const r=n[0],e=n[1],o=n[2],u=n[3],a=r+r,i=e+e,c=o+o,s=r*a,f=e*a,h=e*i,l=o*a,M=o*i,w=o*c,d=u*a,m=u*i,v=u*c;return t[0]=1-h-w,t[1]=f+v,t[2]=l-m,t[3]=0,t[4]=f-v,t[5]=1-s-w,t[6]=M+d,t[7]=0,t[8]=l+m,t[9]=M-d,t[10]=1-s-h,t[11]=0,t},getAxis:function(n,t,r){const e=4*t;return(r=r||u())[0]=n[e+0],r[1]=n[e+1],r},getScaling:function(n,t){t=t||u();const r=n[0],e=n[1],o=n[4],a=n[5];return t[0]=Math.sqrt(r*r+e*e),t[1]=Math.sqrt(o*o+a*a),t},getTranslation:function(n,t){return(t=t||u())[0]=n[8],t[1]=n[9],t},identity:F,inverse:k,invert:k,mul:D,multiply:D,negate:function(n,t){return(t=t||_())[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[4]=-n[4],t[5]=-n[5],t[6]=-n[6],t[8]=-n[8],t[9]=-n[9],t[10]=-n[10],t},rotate:function(n,t,r){r=r||_();const e=n[0],o=n[1],u=n[2],a=n[4],i=n[5],c=n[6],s=Math.cos(t),f=Math.sin(t);return r[0]=s*e+f*a,r[1]=s*o+f*i,r[2]=s*u+f*c,r[4]=s*a-f*e,r[5]=s*i-f*o,r[6]=s*c-f*u,n!==r&&(r[8]=n[8],r[9]=n[9],r[10]=n[10]),r},rotation:function(n,t){t=t||_();const r=Math.cos(n),e=Math.sin(n);return t[0]=r,t[1]=e,t[2]=0,t[4]=-e,t[5]=r,t[6]=0,t[8]=0,t[9]=0,t[10]=1,t},scale:function(n,t,r){r=r||_();const e=t[0],o=t[1];return r[0]=e*n[0],r[1]=e*n[1],r[2]=e*n[2],r[4]=o*n[4],r[5]=o*n[5],r[6]=o*n[6],n!==r&&(r[8]=n[8],r[9]=n[9],r[10]=n[10]),r},scaling:function(n,t){return(t=t||_())[0]=n[0],t[1]=0,t[2]=0,t[4]=0,t[5]=n[1],t[6]=0,t[8]=0,t[9]=0,t[10]=1,t},set:function(n,t,r,e,o,u,a,i,c,s){return(s=s||_())[0]=n,s[1]=t,s[2]=r,s[3]=0,s[4]=e,s[5]=o,s[6]=u,s[7]=0,s[8]=a,s[9]=i,s[10]=c,s[11]=0,s},setAxis:function(n,t,r,e){e!==n&&(e=z(n,e));const o=4*r;return e[o+0]=t[0],e[o+1]=t[1],e},setDefaultType:T,setTranslation:function(n,t,r){return n!==(r=r||F())&&(r[0]=n[0],r[1]=n[1],r[2]=n[2],r[4]=n[4],r[5]=n[5],r[6]=n[6]),r[8]=t[0],r[9]=t[1],r[10]=1,r},translate:function(n,t,r){r=r||_();const e=t[0],o=t[1],u=n[0],a=n[1],i=n[2],c=n[4],s=n[5],f=n[6],h=n[8],l=n[9],M=n[10];return n!==r&&(r[0]=u,r[1]=a,r[2]=i,r[4]=c,r[5]=s,r[6]=f),r[8]=u*e+c*o+h,r[9]=a*e+s*o+l,r[10]=i*e+f*o+M,r},translation:function(n,t){return(t=t||_())[0]=1,t[1]=0,t[2]=0,t[4]=0,t[5]=1,t[6]=0,t[8]=n[0],t[9]=n[1],t[10]=1,t},transpose:function(n,t){if((t=t||_())===n){let r;return r=n[1],n[1]=n[4],n[4]=r,r=n[2],n[2]=n[8],n[8]=r,r=n[6],n[6]=n[9],n[9]=r,t}const r=n[0],e=n[1],o=n[2],u=n[4],a=n[5],i=n[6],c=n[8],s=n[9],f=n[10];return t[0]=r,t[1]=u,t[2]=c,t[4]=e,t[5]=a,t[6]=s,t[8]=o,t[9]=i,t[10]=f,t},uniformScale:function(n,t,r){return(r=r||_())[0]=t*n[0],r[1]=t*n[1],r[2]=t*n[2],r[4]=t*n[4],r[5]=t*n[5],r[6]=t*n[6],n!==r&&(r[8]=n[8],r[9]=n[9],r[10]=n[10]),r},uniformScaling:function(n,t){return(t=t||_())[0]=n,t[1]=0,t[2]=0,t[4]=0,t[5]=n,t[6]=0,t[8]=0,t[9]=0,t[10]=1,t}};function P(n,t,r){return(r=r||new a(3))[0]=n[0]-t[0],r[1]=n[1]-t[1],r[2]=n[2]-t[2],r}function V(n,t,r,e){return(e=e||new a(3))[0]=n[0]+r*(t[0]-n[0]),e[1]=n[1]+r*(t[1]-n[1]),e[2]=n[2]+r*(t[2]-n[2]),e}function Z(n,t,r){return(r=r||new a(3))[0]=n[0]*t,r[1]=n[1]*t,r[2]=n[2]*t,r}function L(n,t){return(t=t||new a(3))[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t}function R(n,t,r){r=r||new a(3);const e=n[2]*t[0]-n[0]*t[2],o=n[0]*t[1]-n[1]*t[0];return r[0]=n[1]*t[2]-n[2]*t[1],r[1]=e,r[2]=o,r}function E(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function X(n){const t=n[0],r=n[1],e=n[2];return Math.sqrt(t*t+r*r+e*e)}const Y=X;function Q(n){const t=n[0],r=n[1],e=n[2];return t*t+r*r+e*e}function j(n,t){const r=n[0]-t[0],e=n[1]-t[1],o=n[2]-t[2];return Math.sqrt(r*r+e*e+o*o)}function N(n,t){const r=n[0]-t[0],e=n[1]-t[1],o=n[2]-t[2];return r*r+e*e+o*o}function U(n,t){t=t||new a(3);const r=n[0],e=n[1],o=n[2],u=Math.sqrt(r*r+e*e+o*o);return u>1e-5?(t[0]=r/u,t[1]=e/u,t[2]=o/u):(t[0]=0,t[1]=0,t[2]=0),t}function O(n,t){return(t=t||new a(3))[0]=n[0],t[1]=n[1],t[2]=n[2],t}function $(n,t,r){return(r=r||new a(3))[0]=n[0]*t[0],r[1]=n[1]*t[1],r[2]=n[2]*t[2],r}function B(n,t,r){return(r=r||new a(3))[0]=n[0]/t[0],r[1]=n[1]/t[1],r[2]=n[2]/t[2],r}function C(n,t,r){return U(n,r=r||new a(3)),Z(r,t,r)}var G={__proto__:null,add:function(n,t,r){return(r=r||new a(3))[0]=n[0]+t[0],r[1]=n[1]+t[1],r[2]=n[2]+t[2],r},addScaled:function(n,t,r,e){return(e=e||new a(3))[0]=n[0]+t[0]*r,e[1]=n[1]+t[1]*r,e[2]=n[2]+t[2]*r,e},angle:function(n,t){const r=n[0],e=n[1],o=n[2],u=t[0],a=t[1],i=t[2],c=Math.sqrt(r*r+e*e+o*o)*Math.sqrt(u*u+a*a+i*i),s=c&&E(n,t)/c;return Math.acos(s)},ceil:function(n,t){return(t=t||new a(3))[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t},clamp:function(n,t=0,r=1,e){return(e=e||new a(3))[0]=Math.min(r,Math.max(t,n[0])),e[1]=Math.min(r,Math.max(t,n[1])),e[2]=Math.min(r,Math.max(t,n[2])),e},clone:O,copy:O,create:c,cross:R,dist:j,distSq:N,distance:j,distanceSq:N,div:B,divScalar:function(n,t,r){return(r=r||new a(3))[0]=n[0]/t,r[1]=n[1]/t,r[2]=n[2]/t,r},divide:B,dot:E,equals:function(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]},equalsApproximately:function(n,r){return Math.abs(n[0]-r[0])<t&&Math.abs(n[1]-r[1])<t&&Math.abs(n[2]-r[2])<t},floor:function(n,t){return(t=t||new a(3))[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t},fromValues:c,getAxis:function(n,t,r){const e=4*t;return(r=r||new a(3))[0]=n[e+0],r[1]=n[e+1],r[2]=n[e+2],r},getScaling:function(n,t){t=t||new a(3);const r=n[0],e=n[1],o=n[2],u=n[4],i=n[5],c=n[6],s=n[8],f=n[9],h=n[10];return t[0]=Math.sqrt(r*r+e*e+o*o),t[1]=Math.sqrt(u*u+i*i+c*c),t[2]=Math.sqrt(s*s+f*f+h*h),t},getTranslation:function(n,t){return(t=t||new a(3))[0]=n[12],t[1]=n[13],t[2]=n[14],t},inverse:L,invert:L,len:Y,lenSq:Q,length:X,lengthSq:Q,lerp:V,lerpV:function(n,t,r,e){return(e=e||new a(3))[0]=n[0]+r[0]*(t[0]-n[0]),e[1]=n[1]+r[1]*(t[1]-n[1]),e[2]=n[2]+r[2]*(t[2]-n[2]),e},max:function(n,t,r){return(r=r||new a(3))[0]=Math.max(n[0],t[0]),r[1]=Math.max(n[1],t[1]),r[2]=Math.max(n[2],t[2]),r},midpoint:function(n,t,r){return V(n,t,.5,r=r||new a(3))},min:function(n,t,r){return(r=r||new a(3))[0]=Math.min(n[0],t[0]),r[1]=Math.min(n[1],t[1]),r[2]=Math.min(n[2],t[2]),r},mul:$,mulScalar:Z,multiply:$,negate:function(n,t){return(t=t||new a(3))[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t},normalize:U,random:function(n=1,t){t=t||new a(3);const r=2*Math.random()*Math.PI,e=2*Math.random()-1,o=Math.sqrt(1-e*e)*n;return t[0]=Math.cos(r)*o,t[1]=Math.sin(r)*o,t[2]=e*n,t},rotateX:function(n,t,r,e){e=e||new a(3);const o=[],u=[];return o[0]=n[0]-t[0],o[1]=n[1]-t[1],o[2]=n[2]-t[2],u[0]=o[0],u[1]=o[1]*Math.cos(r)-o[2]*Math.sin(r),u[2]=o[1]*Math.sin(r)+o[2]*Math.cos(r),e[0]=u[0]+t[0],e[1]=u[1]+t[1],e[2]=u[2]+t[2],e},rotateY:function(n,t,r,e){e=e||new a(3);const o=[],u=[];return o[0]=n[0]-t[0],o[1]=n[1]-t[1],o[2]=n[2]-t[2],u[0]=o[2]*Math.sin(r)+o[0]*Math.cos(r),u[1]=o[1],u[2]=o[2]*Math.cos(r)-o[0]*Math.sin(r),e[0]=u[0]+t[0],e[1]=u[1]+t[1],e[2]=u[2]+t[2],e},rotateZ:function(n,t,r,e){e=e||new a(3);const o=[],u=[];return o[0]=n[0]-t[0],o[1]=n[1]-t[1],o[2]=n[2]-t[2],u[0]=o[0]*Math.cos(r)-o[1]*Math.sin(r),u[1]=o[0]*Math.sin(r)+o[1]*Math.cos(r),u[2]=o[2],e[0]=u[0]+t[0],e[1]=u[1]+t[1],e[2]=u[2]+t[2],e},round:function(n,t){return(t=t||new a(3))[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t},scale:Z,set:function(n,t,r,e){return(e=e||new a(3))[0]=n,e[1]=t,e[2]=r,e},setDefaultType:i,setLength:C,sub:P,subtract:P,transformMat3:function(n,t,r){r=r||new a(3);const e=n[0],o=n[1],u=n[2];return r[0]=e*t[0]+o*t[4]+u*t[8],r[1]=e*t[1]+o*t[5]+u*t[9],r[2]=e*t[2]+o*t[6]+u*t[10],r},transformMat4:function(n,t,r){r=r||new a(3);const e=n[0],o=n[1],u=n[2],i=t[3]*e+t[7]*o+t[11]*u+t[15]||1;return r[0]=(t[0]*e+t[4]*o+t[8]*u+t[12])/i,r[1]=(t[1]*e+t[5]*o+t[9]*u+t[13])/i,r[2]=(t[2]*e+t[6]*o+t[10]*u+t[14])/i,r},transformMat4Upper3x3:function(n,t,r){r=r||new a(3);const e=n[0],o=n[1],u=n[2];return r[0]=e*t[0]+o*t[4]+u*t[8],r[1]=e*t[1]+o*t[5]+u*t[9],r[2]=e*t[2]+o*t[6]+u*t[10],r},transformQuat:function(n,t,r){r=r||new a(3);const e=t[0],o=t[1],u=t[2],i=2*t[3],c=n[0],s=n[1],f=n[2],h=o*f-u*s,l=u*c-e*f,M=e*s-o*c;return r[0]=c+h*i+2*(o*M-u*l),r[1]=s+l*i+2*(u*h-e*M),r[2]=f+M*i+2*(e*l-o*h),r},truncate:function(n,t,r){return r=r||new a(3),X(n)>t?C(n,t,r):O(n,r)},zero:function(n){return(n=n||new a(3))[0]=0,n[1]=0,n[2]=0,n}};let H=Float32Array;function J(n){const t=H;return H=n,t}function K(n,t){return(t=t||new H(16))[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function W(n){return(n=n||new H(16))[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function nn(n,t){t=t||new H(16);const r=n[0],e=n[1],o=n[2],u=n[3],a=n[4],i=n[5],c=n[6],s=n[7],f=n[8],h=n[9],l=n[10],M=n[11],w=n[12],d=n[13],m=n[14],v=n[15],p=l*v,b=m*M,q=c*v,y=m*s,x=c*M,g=l*s,S=o*v,A=m*u,_=o*M,T=l*u,z=o*s,F=c*u,k=f*d,D=w*h,I=a*d,P=w*i,V=a*h,Z=f*i,L=r*d,R=w*e,E=r*h,X=f*e,Y=r*i,Q=a*e,j=p*i+y*h+x*d-(b*i+q*h+g*d),N=b*e+S*h+T*d-(p*e+A*h+_*d),U=q*e+A*i+z*d-(y*e+S*i+F*d),O=g*e+_*i+F*h-(x*e+T*i+z*h),$=1/(r*j+a*N+f*U+w*O);return t[0]=$*j,t[1]=$*N,t[2]=$*U,t[3]=$*O,t[4]=$*(b*a+q*f+g*w-(p*a+y*f+x*w)),t[5]=$*(p*r+A*f+_*w-(b*r+S*f+T*w)),t[6]=$*(y*r+S*a+F*w-(q*r+A*a+z*w)),t[7]=$*(x*r+T*a+z*f-(g*r+_*a+F*f)),t[8]=$*(k*s+P*M+V*v-(D*s+I*M+Z*v)),t[9]=$*(D*u+L*M+X*v-(k*u+R*M+E*v)),t[10]=$*(I*u+R*s+Y*v-(P*u+L*s+Q*v)),t[11]=$*(Z*u+E*s+Q*M-(V*u+X*s+Y*M)),t[12]=$*(I*l+Z*m+D*c-(V*m+k*c+P*l)),t[13]=$*(E*m+k*o+R*l-(L*l+X*m+D*o)),t[14]=$*(L*c+Q*m+P*o-(Y*m+I*o+R*c)),t[15]=$*(Y*l+V*o+X*c-(E*c+Q*l+Z*o)),t}function tn(n,t,r){r=r||new H(16);const e=n[0],o=n[1],u=n[2],a=n[3],i=n[4],c=n[5],s=n[6],f=n[7],h=n[8],l=n[9],M=n[10],w=n[11],d=n[12],m=n[13],v=n[14],p=n[15],b=t[0],q=t[1],y=t[2],x=t[3],g=t[4],S=t[5],A=t[6],_=t[7],T=t[8],z=t[9],F=t[10],k=t[11],D=t[12],I=t[13],P=t[14],V=t[15];return r[0]=e*b+i*q+h*y+d*x,r[1]=o*b+c*q+l*y+m*x,r[2]=u*b+s*q+M*y+v*x,r[3]=a*b+f*q+w*y+p*x,r[4]=e*g+i*S+h*A+d*_,r[5]=o*g+c*S+l*A+m*_,r[6]=u*g+s*S+M*A+v*_,r[7]=a*g+f*S+w*A+p*_,r[8]=e*T+i*z+h*F+d*k,r[9]=o*T+c*z+l*F+m*k,r[10]=u*T+s*z+M*F+v*k,r[11]=a*T+f*z+w*F+p*k,r[12]=e*D+i*I+h*P+d*V,r[13]=o*D+c*I+l*P+m*V,r[14]=u*D+s*I+M*P+v*V,r[15]=a*D+f*I+w*P+p*V,r}let rn,en,on;function un(n,t,r){r=r||new H(16);let e=n[0],o=n[1],u=n[2];const a=Math.sqrt(e*e+o*o+u*u);e/=a,o/=a,u/=a;const i=e*e,c=o*o,s=u*u,f=Math.cos(t),h=Math.sin(t),l=1-f;return r[0]=i+(1-i)*f,r[1]=e*o*l+u*h,r[2]=e*u*l-o*h,r[3]=0,r[4]=e*o*l-u*h,r[5]=c+(1-c)*f,r[6]=o*u*l+e*h,r[7]=0,r[8]=e*u*l+o*h,r[9]=o*u*l-e*h,r[10]=s+(1-s)*f,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function an(n,t,r,e){e=e||new H(16);let o=t[0],u=t[1],a=t[2];const i=Math.sqrt(o*o+u*u+a*a);o/=i,u/=i,a/=i;const c=o*o,s=u*u,f=a*a,h=Math.cos(r),l=Math.sin(r),M=1-h,w=c+(1-c)*h,d=o*u*M+a*l,m=o*a*M-u*l,v=o*u*M-a*l,p=s+(1-s)*h,b=u*a*M+o*l,q=o*a*M+u*l,y=u*a*M-o*l,x=f+(1-f)*h,g=n[0],S=n[1],A=n[2],_=n[3],T=n[4],z=n[5],F=n[6],k=n[7],D=n[8],I=n[9],P=n[10],V=n[11];return e[0]=w*g+d*T+m*D,e[1]=w*S+d*z+m*I,e[2]=w*A+d*F+m*P,e[3]=w*_+d*k+m*V,e[4]=v*g+p*T+b*D,e[5]=v*S+p*z+b*I,e[6]=v*A+p*F+b*P,e[7]=v*_+p*k+b*V,e[8]=q*g+y*T+x*D,e[9]=q*S+y*z+x*I,e[10]=q*A+y*F+x*P,e[11]=q*_+y*k+x*V,n!==e&&(e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e}var cn={__proto__:null,aim:function(n,t,r,e){return e=e||new H(16),rn=rn||c(),en=en||c(),on=on||c(),U(P(t,n,on),on),U(R(r,on,rn),rn),U(R(on,rn,en),en),e[0]=rn[0],e[1]=rn[1],e[2]=rn[2],e[3]=0,e[4]=en[0],e[5]=en[1],e[6]=en[2],e[7]=0,e[8]=on[0],e[9]=on[1],e[10]=on[2],e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},axisRotate:an,axisRotation:un,cameraAim:function(n,t,r,e){return e=e||new H(16),rn=rn||c(),en=en||c(),on=on||c(),U(P(n,t,on),on),U(R(r,on,rn),rn),U(R(on,rn,en),en),e[0]=rn[0],e[1]=rn[1],e[2]=rn[2],e[3]=0,e[4]=en[0],e[5]=en[1],e[6]=en[2],e[7]=0,e[8]=on[0],e[9]=on[1],e[10]=on[2],e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},clone:K,copy:K,create:function(n,t,r,e,o,u,a,i,c,s,f,h,l,M,w,d){const m=new H(16);return void 0!==n&&(m[0]=n,void 0!==t&&(m[1]=t,void 0!==r&&(m[2]=r,void 0!==e&&(m[3]=e,void 0!==o&&(m[4]=o,void 0!==u&&(m[5]=u,void 0!==a&&(m[6]=a,void 0!==i&&(m[7]=i,void 0!==c&&(m[8]=c,void 0!==s&&(m[9]=s,void 0!==f&&(m[10]=f,void 0!==h&&(m[11]=h,void 0!==l&&(m[12]=l,void 0!==M&&(m[13]=M,void 0!==w&&(m[14]=w,void 0!==d&&(m[15]=d)))))))))))))))),m},determinant:function(n){const t=n[0],r=n[1],e=n[2],o=n[3],u=n[4],a=n[5],i=n[6],c=n[7],s=n[8],f=n[9],h=n[10],l=n[11],M=n[12],w=n[13],d=n[14],m=n[15],v=h*m,p=d*l,b=i*m,q=d*c,y=i*l,x=h*c,g=e*m,S=d*o,A=e*l,_=h*o,T=e*c,z=i*o;return t*(v*a+q*f+y*w-(p*a+b*f+x*w))+u*(p*r+g*f+_*w-(v*r+S*f+A*w))+s*(b*r+S*a+T*w-(q*r+g*a+z*w))+M*(x*r+A*a+z*f-(y*r+_*a+T*f))},equals:function(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]&&n[3]===t[3]&&n[4]===t[4]&&n[5]===t[5]&&n[6]===t[6]&&n[7]===t[7]&&n[8]===t[8]&&n[9]===t[9]&&n[10]===t[10]&&n[11]===t[11]&&n[12]===t[12]&&n[13]===t[13]&&n[14]===t[14]&&n[15]===t[15]},equalsApproximately:function(n,r){return Math.abs(n[0]-r[0])<t&&Math.abs(n[1]-r[1])<t&&Math.abs(n[2]-r[2])<t&&Math.abs(n[3]-r[3])<t&&Math.abs(n[4]-r[4])<t&&Math.abs(n[5]-r[5])<t&&Math.abs(n[6]-r[6])<t&&Math.abs(n[7]-r[7])<t&&Math.abs(n[8]-r[8])<t&&Math.abs(n[9]-r[9])<t&&Math.abs(n[10]-r[10])<t&&Math.abs(n[11]-r[11])<t&&Math.abs(n[12]-r[12])<t&&Math.abs(n[13]-r[13])<t&&Math.abs(n[14]-r[14])<t&&Math.abs(n[15]-r[15])<t},fromMat3:function(n,t){return(t=t||new H(16))[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=0,t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=0,t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromQuat:function(n,t){t=t||new H(16);const r=n[0],e=n[1],o=n[2],u=n[3],a=r+r,i=e+e,c=o+o,s=r*a,f=e*a,h=e*i,l=o*a,M=o*i,w=o*c,d=u*a,m=u*i,v=u*c;return t[0]=1-h-w,t[1]=f+v,t[2]=l-m,t[3]=0,t[4]=f-v,t[5]=1-s-w,t[6]=M+d,t[7]=0,t[8]=l+m,t[9]=M-d,t[10]=1-s-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},frustum:function(n,t,r,e,o,u,a){const i=t-n,c=e-r,s=o-u;return(a=a||new H(16))[0]=2*o/i,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*o/c,a[6]=0,a[7]=0,a[8]=(n+t)/i,a[9]=(e+r)/c,a[10]=u/s,a[11]=-1,a[12]=0,a[13]=0,a[14]=o*u/s,a[15]=0,a},frustumReverseZ:function(n,t,r,e,o,u=1/0,a){const i=t-n,c=e-r;if((a=a||new H(16))[0]=2*o/i,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*o/c,a[6]=0,a[7]=0,a[8]=(n+t)/i,a[9]=(e+r)/c,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,u===1/0)a[10]=0,a[14]=o;else{const n=1/(u-o);a[10]=o*n,a[14]=u*o*n}return a},getAxis:function(n,t,r){const e=4*t;return(r=r||c())[0]=n[e+0],r[1]=n[e+1],r[2]=n[e+2],r},getScaling:function(n,t){t=t||c();const r=n[0],e=n[1],o=n[2],u=n[4],a=n[5],i=n[6],s=n[8],f=n[9],h=n[10];return t[0]=Math.sqrt(r*r+e*e+o*o),t[1]=Math.sqrt(u*u+a*a+i*i),t[2]=Math.sqrt(s*s+f*f+h*h),t},getTranslation:function(n,t){return(t=t||c())[0]=n[12],t[1]=n[13],t[2]=n[14],t},identity:W,inverse:nn,invert:nn,lookAt:function(n,t,r,e){return e=e||new H(16),rn=rn||c(),en=en||c(),on=on||c(),U(P(n,t,on),on),U(R(r,on,rn),rn),U(R(on,rn,en),en),e[0]=rn[0],e[1]=en[0],e[2]=on[0],e[3]=0,e[4]=rn[1],e[5]=en[1],e[6]=on[1],e[7]=0,e[8]=rn[2],e[9]=en[2],e[10]=on[2],e[11]=0,e[12]=-(rn[0]*n[0]+rn[1]*n[1]+rn[2]*n[2]),e[13]=-(en[0]*n[0]+en[1]*n[1]+en[2]*n[2]),e[14]=-(on[0]*n[0]+on[1]*n[1]+on[2]*n[2]),e[15]=1,e},mul:tn,multiply:tn,negate:function(n,t){return(t=t||new H(16))[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=-n[3],t[4]=-n[4],t[5]=-n[5],t[6]=-n[6],t[7]=-n[7],t[8]=-n[8],t[9]=-n[9],t[10]=-n[10],t[11]=-n[11],t[12]=-n[12],t[13]=-n[13],t[14]=-n[14],t[15]=-n[15],t},ortho:function(n,t,r,e,o,u,a){return(a=a||new H(16))[0]=2/(t-n),a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2/(e-r),a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1/(o-u),a[11]=0,a[12]=(t+n)/(n-t),a[13]=(e+r)/(r-e),a[14]=o/(o-u),a[15]=1,a},perspective:function(n,t,r,e,o){o=o||new H(16);const u=Math.tan(.5*Math.PI-.5*n);if(o[0]=u/t,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=u,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,Number.isFinite(e)){const n=1/(r-e);o[10]=e*n,o[14]=e*r*n}else o[10]=-1,o[14]=-r;return o},perspectiveReverseZ:function(n,t,r,e=1/0,o){o=o||new H(16);const u=1/Math.tan(.5*n);if(o[0]=u/t,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=u,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,e===1/0)o[10]=0,o[14]=r;else{const n=1/(e-r);o[10]=r*n,o[14]=e*r*n}return o},rotate:an,rotateX:function(n,t,r){r=r||new H(16);const e=n[4],o=n[5],u=n[6],a=n[7],i=n[8],c=n[9],s=n[10],f=n[11],h=Math.cos(t),l=Math.sin(t);return r[4]=h*e+l*i,r[5]=h*o+l*c,r[6]=h*u+l*s,r[7]=h*a+l*f,r[8]=h*i-l*e,r[9]=h*c-l*o,r[10]=h*s-l*u,r[11]=h*f-l*a,n!==r&&(r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r},rotateY:function(n,t,r){r=r||new H(16);const e=n[0],o=n[1],u=n[2],a=n[3],i=n[8],c=n[9],s=n[10],f=n[11],h=Math.cos(t),l=Math.sin(t);return r[0]=h*e-l*i,r[1]=h*o-l*c,r[2]=h*u-l*s,r[3]=h*a-l*f,r[8]=h*i+l*e,r[9]=h*c+l*o,r[10]=h*s+l*u,r[11]=h*f+l*a,n!==r&&(r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r},rotateZ:function(n,t,r){r=r||new H(16);const e=n[0],o=n[1],u=n[2],a=n[3],i=n[4],c=n[5],s=n[6],f=n[7],h=Math.cos(t),l=Math.sin(t);return r[0]=h*e+l*i,r[1]=h*o+l*c,r[2]=h*u+l*s,r[3]=h*a+l*f,r[4]=h*i-l*e,r[5]=h*c-l*o,r[6]=h*s-l*u,r[7]=h*f-l*a,n!==r&&(r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r},rotation:un,rotationX:function(n,t){t=t||new H(16);const r=Math.cos(n),e=Math.sin(n);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=e,t[7]=0,t[8]=0,t[9]=-e,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},rotationY:function(n,t){t=t||new H(16);const r=Math.cos(n),e=Math.sin(n);return t[0]=r,t[1]=0,t[2]=-e,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=e,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},rotationZ:function(n,t){t=t||new H(16);const r=Math.cos(n),e=Math.sin(n);return t[0]=r,t[1]=e,t[2]=0,t[3]=0,t[4]=-e,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},scale:function(n,t,r){r=r||new H(16);const e=t[0],o=t[1],u=t[2];return r[0]=e*n[0],r[1]=e*n[1],r[2]=e*n[2],r[3]=e*n[3],r[4]=o*n[4],r[5]=o*n[5],r[6]=o*n[6],r[7]=o*n[7],r[8]=u*n[8],r[9]=u*n[9],r[10]=u*n[10],r[11]=u*n[11],n!==r&&(r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r},scaling:function(n,t){return(t=t||new H(16))[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},set:function(n,t,r,e,o,u,a,i,c,s,f,h,l,M,w,d,m){return(m=m||new H(16))[0]=n,m[1]=t,m[2]=r,m[3]=e,m[4]=o,m[5]=u,m[6]=a,m[7]=i,m[8]=c,m[9]=s,m[10]=f,m[11]=h,m[12]=l,m[13]=M,m[14]=w,m[15]=d,m},setAxis:function(n,t,r,e){e!==n&&(e=K(n,e));const o=4*r;return e[o+0]=t[0],e[o+1]=t[1],e[o+2]=t[2],e},setDefaultType:J,setTranslation:function(n,t,r){return n!==(r=r||W())&&(r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11]),r[12]=t[0],r[13]=t[1],r[14]=t[2],r[15]=1,r},translate:function(n,t,r){r=r||new H(16);const e=t[0],o=t[1],u=t[2],a=n[0],i=n[1],c=n[2],s=n[3],f=n[4],h=n[5],l=n[6],M=n[7],w=n[8],d=n[9],m=n[10],v=n[11],p=n[12],b=n[13],q=n[14],y=n[15];return n!==r&&(r[0]=a,r[1]=i,r[2]=c,r[3]=s,r[4]=f,r[5]=h,r[6]=l,r[7]=M,r[8]=w,r[9]=d,r[10]=m,r[11]=v),r[12]=a*e+f*o+w*u+p,r[13]=i*e+h*o+d*u+b,r[14]=c*e+l*o+m*u+q,r[15]=s*e+M*o+v*u+y,r},translation:function(n,t){return(t=t||new H(16))[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},transpose:function(n,t){if((t=t||new H(16))===n){let r;return r=n[1],n[1]=n[4],n[4]=r,r=n[2],n[2]=n[8],n[8]=r,r=n[3],n[3]=n[12],n[12]=r,r=n[6],n[6]=n[9],n[9]=r,r=n[7],n[7]=n[13],n[13]=r,r=n[11],n[11]=n[14],n[14]=r,t}const r=n[0],e=n[1],o=n[2],u=n[3],a=n[4],i=n[5],c=n[6],s=n[7],f=n[8],h=n[9],l=n[10],M=n[11],w=n[12],d=n[13],m=n[14],v=n[15];return t[0]=r,t[1]=a,t[2]=f,t[3]=w,t[4]=e,t[5]=i,t[6]=h,t[7]=d,t[8]=o,t[9]=c,t[10]=l,t[11]=m,t[12]=u,t[13]=s,t[14]=M,t[15]=v,t},uniformScale:function(n,t,r){return(r=r||new H(16))[0]=t*n[0],r[1]=t*n[1],r[2]=t*n[2],r[3]=t*n[3],r[4]=t*n[4],r[5]=t*n[5],r[6]=t*n[6],r[7]=t*n[7],r[8]=t*n[8],r[9]=t*n[9],r[10]=t*n[10],r[11]=t*n[11],n!==r&&(r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r},uniformScaling:function(n,t){return(t=t||new H(16))[0]=n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}};let sn=Float32Array;function fn(n){const t=sn;return sn=n,t}function hn(n,t,r,e){const o=new sn(4);return void 0!==n&&(o[0]=n,void 0!==t&&(o[1]=t,void 0!==r&&(o[2]=r,void 0!==e&&(o[3]=e)))),o}function ln(n,t,r){r=r||new sn(4);const e=.5*t,o=Math.sin(e);return r[0]=o*n[0],r[1]=o*n[1],r[2]=o*n[2],r[3]=Math.cos(e),r}function Mn(n,t,r){r=r||new sn(4);const e=n[0],o=n[1],u=n[2],a=n[3],i=t[0],c=t[1],s=t[2],f=t[3];return r[0]=e*f+a*i+o*s-u*c,r[1]=o*f+a*c+u*i-e*s,r[2]=u*f+a*s+e*c-o*i,r[3]=a*f-e*i-o*c-u*s,r}function wn(n,r,e,o){o=o||new sn(4);const u=n[0],a=n[1],i=n[2],c=n[3];let s,f,h=r[0],l=r[1],M=r[2],w=r[3],d=u*h+a*l+i*M+c*w;if(d<0&&(d=-d,h=-h,l=-l,M=-M,w=-w),1-d>t){const n=Math.acos(d),t=Math.sin(n);s=Math.sin((1-e)*n)/t,f=Math.sin(e*n)/t}else s=1-e,f=e;return o[0]=s*u+f*h,o[1]=s*a+f*l,o[2]=s*i+f*M,o[3]=s*c+f*w,o}function dn(n,t){return(t=t||new sn(4))[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t}function mn(n,t,r){return(r=r||new sn(4))[0]=n[0]-t[0],r[1]=n[1]-t[1],r[2]=n[2]-t[2],r[3]=n[3]-t[3],r}function vn(n,t,r){return(r=r||new sn(4))[0]=n[0]*t,r[1]=n[1]*t,r[2]=n[2]*t,r[3]=n[3]*t,r}function pn(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]}function bn(n){const t=n[0],r=n[1],e=n[2],o=n[3];return Math.sqrt(t*t+r*r+e*e+o*o)}function qn(n){const t=n[0],r=n[1],e=n[2],o=n[3];return t*t+r*r+e*e+o*o}function yn(n,t){t=t||new sn(4);const r=n[0],e=n[1],o=n[2],u=n[3],a=Math.sqrt(r*r+e*e+o*o+u*u);return a>1e-5?(t[0]=r/a,t[1]=e/a,t[2]=o/a,t[3]=u/a):(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}let xn,gn,Sn,An,_n;var Tn={__proto__:null,add:function(n,t,r){return(r=r||new sn(4))[0]=n[0]+t[0],r[1]=n[1]+t[1],r[2]=n[2]+t[2],r[3]=n[3]+t[3],r},angle:function(n,t){const r=pn(n,t);return Math.acos(2*r*r-1)},clone:dn,conjugate:function(n,t){return(t=t||new sn(4))[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t},copy:dn,create:hn,divScalar:function(n,t,r){return(r=r||new sn(4))[0]=n[0]/t,r[1]=n[1]/t,r[2]=n[2]/t,r[3]=n[3]/t,r},dot:pn,equals:function(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]&&n[3]===t[3]},equalsApproximately:function(n,r){return Math.abs(n[0]-r[0])<t&&Math.abs(n[1]-r[1])<t&&Math.abs(n[2]-r[2])<t&&Math.abs(n[3]-r[3])<t},fromAxisAngle:ln,fromEuler:function(n,t,r,e,o){o=o||new sn(4);const u=.5*n,a=.5*t,i=.5*r,c=Math.sin(u),s=Math.cos(u),f=Math.sin(a),h=Math.cos(a),l=Math.sin(i),M=Math.cos(i);switch(e){case"xyz":o[0]=c*h*M+s*f*l,o[1]=s*f*M-c*h*l,o[2]=s*h*l+c*f*M,o[3]=s*h*M-c*f*l;break;case"xzy":o[0]=c*h*M-s*f*l,o[1]=s*f*M-c*h*l,o[2]=s*h*l+c*f*M,o[3]=s*h*M+c*f*l;break;case"yxz":o[0]=c*h*M+s*f*l,o[1]=s*f*M-c*h*l,o[2]=s*h*l-c*f*M,o[3]=s*h*M+c*f*l;break;case"yzx":o[0]=c*h*M+s*f*l,o[1]=s*f*M+c*h*l,o[2]=s*h*l-c*f*M,o[3]=s*h*M-c*f*l;break;case"zxy":o[0]=c*h*M-s*f*l,o[1]=s*f*M+c*h*l,o[2]=s*h*l+c*f*M,o[3]=s*h*M-c*f*l;break;case"zyx":o[0]=c*h*M-s*f*l,o[1]=s*f*M+c*h*l,o[2]=s*h*l-c*f*M,o[3]=s*h*M+c*f*l;break;default:throw new Error(`Unknown rotation order: ${e}`)}return o},fromMat:function(n,t){t=t||new sn(4);const r=n[0]+n[5]+n[10];if(r>0){const e=Math.sqrt(r+1);t[3]=.5*e;const o=.5/e;t[0]=(n[6]-n[9])*o,t[1]=(n[8]-n[2])*o,t[2]=(n[1]-n[4])*o}else{let r=0;n[5]>n[0]&&(r=1),n[10]>n[4*r+r]&&(r=2);const e=(r+1)%3,o=(r+2)%3,u=Math.sqrt(n[4*r+r]-n[4*e+e]-n[4*o+o]+1);t[r]=.5*u;const a=.5/u;t[3]=(n[4*e+o]-n[4*o+e])*a,t[e]=(n[4*e+r]+n[4*r+e])*a,t[o]=(n[4*o+r]+n[4*r+o])*a}return t},fromValues:hn,identity:function(n){return(n=n||new sn(4))[0]=0,n[1]=0,n[2]=0,n[3]=1,n},inverse:function(n,t){t=t||new sn(4);const r=n[0],e=n[1],o=n[2],u=n[3],a=r*r+e*e+o*o+u*u,i=a?1/a:0;return t[0]=-r*i,t[1]=-e*i,t[2]=-o*i,t[3]=u*i,t},len:bn,lenSq:qn,length:bn,lengthSq:qn,lerp:function(n,t,r,e){return(e=e||new sn(4))[0]=n[0]+r*(t[0]-n[0]),e[1]=n[1]+r*(t[1]-n[1]),e[2]=n[2]+r*(t[2]-n[2]),e[3]=n[3]+r*(t[3]-n[3]),e},mul:Mn,mulScalar:vn,multiply:Mn,normalize:yn,rotateX:function(n,t,r){r=r||new sn(4);const e=.5*t,o=n[0],u=n[1],a=n[2],i=n[3],c=Math.sin(e),s=Math.cos(e);return r[0]=o*s+i*c,r[1]=u*s+a*c,r[2]=a*s-u*c,r[3]=i*s-o*c,r},rotateY:function(n,t,r){r=r||new sn(4);const e=.5*t,o=n[0],u=n[1],a=n[2],i=n[3],c=Math.sin(e),s=Math.cos(e);return r[0]=o*s-a*c,r[1]=u*s+i*c,r[2]=a*s+o*c,r[3]=i*s-u*c,r},rotateZ:function(n,t,r){r=r||new sn(4);const e=.5*t,o=n[0],u=n[1],a=n[2],i=n[3],c=Math.sin(e),s=Math.cos(e);return r[0]=o*s+u*c,r[1]=u*s-o*c,r[2]=a*s+i*c,r[3]=i*s-a*c,r},rotationTo:function(n,t,r){r=r||new sn(4),xn=xn||c(),gn=gn||c(1,0,0),Sn=Sn||c(0,1,0);const e=E(n,t);return e<-.999999?(R(gn,n,xn),Y(xn)<1e-6&&R(Sn,n,xn),U(xn,xn),ln(xn,Math.PI,r),r):e>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(R(n,t,xn),r[0]=xn[0],r[1]=xn[1],r[2]=xn[2],r[3]=1+e,yn(r,r))},scale:vn,set:function(n,t,r,e,o){return(o=o||new sn(4))[0]=n,o[1]=t,o[2]=r,o[3]=e,o},setDefaultType:fn,slerp:wn,sqlerp:function(n,t,r,e,o,u){return u=u||new sn(4),An=An||new sn(4),_n=_n||new sn(4),wn(n,e,o,An),wn(t,r,o,_n),wn(An,_n,2*o*(1-o),u),u},sub:mn,subtract:mn,toAxisAngle:function(n,r){r=r||c(4);const e=2*Math.acos(n[3]),o=Math.sin(.5*e);return o>t?(r[0]=n[0]/o,r[1]=n[1]/o,r[2]=n[2]/o):(r[0]=1,r[1]=0,r[2]=0),{angle:e,axis:r}}};let zn=Float32Array;function Fn(n){const t=zn;return zn=n,t}function kn(n,t,r,e){const o=new zn(4);return void 0!==n&&(o[0]=n,void 0!==t&&(o[1]=t,void 0!==r&&(o[2]=r,void 0!==e&&(o[3]=e)))),o}function Dn(n,t,r){return(r=r||new zn(4))[0]=n[0]-t[0],r[1]=n[1]-t[1],r[2]=n[2]-t[2],r[3]=n[3]-t[3],r}function In(n,t,r,e){return(e=e||new zn(4))[0]=n[0]+r*(t[0]-n[0]),e[1]=n[1]+r*(t[1]-n[1]),e[2]=n[2]+r*(t[2]-n[2]),e[3]=n[3]+r*(t[3]-n[3]),e}function Pn(n,t,r){return(r=r||new zn(4))[0]=n[0]*t,r[1]=n[1]*t,r[2]=n[2]*t,r[3]=n[3]*t,r}function Vn(n,t){return(t=t||new zn(4))[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t[3]=1/n[3],t}function Zn(n){const t=n[0],r=n[1],e=n[2],o=n[3];return Math.sqrt(t*t+r*r+e*e+o*o)}function Ln(n){const t=n[0],r=n[1],e=n[2],o=n[3];return t*t+r*r+e*e+o*o}function Rn(n,t){const r=n[0]-t[0],e=n[1]-t[1],o=n[2]-t[2],u=n[3]-t[3];return Math.sqrt(r*r+e*e+o*o+u*u)}function En(n,t){const r=n[0]-t[0],e=n[1]-t[1],o=n[2]-t[2],u=n[3]-t[3];return r*r+e*e+o*o+u*u}function Xn(n,t){t=t||new zn(4);const r=n[0],e=n[1],o=n[2],u=n[3],a=Math.sqrt(r*r+e*e+o*o+u*u);return a>1e-5?(t[0]=r/a,t[1]=e/a,t[2]=o/a,t[3]=u/a):(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Yn(n,t){return(t=t||new zn(4))[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t}function Qn(n,t,r){return(r=r||new zn(4))[0]=n[0]*t[0],r[1]=n[1]*t[1],r[2]=n[2]*t[2],r[3]=n[3]*t[3],r}function jn(n,t,r){return(r=r||new zn(4))[0]=n[0]/t[0],r[1]=n[1]/t[1],r[2]=n[2]/t[2],r[3]=n[3]/t[3],r}function Nn(n,t,r){return Xn(n,r=r||new zn(4)),Pn(r,t,r)}var Un={__proto__:null,add:function(n,t,r){return(r=r||new zn(4))[0]=n[0]+t[0],r[1]=n[1]+t[1],r[2]=n[2]+t[2],r[3]=n[3]+t[3],r},addScaled:function(n,t,r,e){return(e=e||new zn(4))[0]=n[0]+t[0]*r,e[1]=n[1]+t[1]*r,e[2]=n[2]+t[2]*r,e[3]=n[3]+t[3]*r,e},ceil:function(n,t){return(t=t||new zn(4))[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t[3]=Math.ceil(n[3]),t},clamp:function(n,t=0,r=1,e){return(e=e||new zn(4))[0]=Math.min(r,Math.max(t,n[0])),e[1]=Math.min(r,Math.max(t,n[1])),e[2]=Math.min(r,Math.max(t,n[2])),e[3]=Math.min(r,Math.max(t,n[3])),e},clone:Yn,copy:Yn,create:kn,dist:Rn,distSq:En,distance:Rn,distanceSq:En,div:jn,divScalar:function(n,t,r){return(r=r||new zn(4))[0]=n[0]/t,r[1]=n[1]/t,r[2]=n[2]/t,r[3]=n[3]/t,r},divide:jn,dot:function(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]},equals:function(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]&&n[3]===t[3]},equalsApproximately:function(n,r){return Math.abs(n[0]-r[0])<t&&Math.abs(n[1]-r[1])<t&&Math.abs(n[2]-r[2])<t&&Math.abs(n[3]-r[3])<t},floor:function(n,t){return(t=t||new zn(4))[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t[3]=Math.floor(n[3]),t},fromValues:kn,inverse:Vn,invert:Vn,len:Zn,lenSq:Ln,length:Zn,lengthSq:Ln,lerp:In,lerpV:function(n,t,r,e){return(e=e||new zn(4))[0]=n[0]+r[0]*(t[0]-n[0]),e[1]=n[1]+r[1]*(t[1]-n[1]),e[2]=n[2]+r[2]*(t[2]-n[2]),e[3]=n[3]+r[3]*(t[3]-n[3]),e},max:function(n,t,r){return(r=r||new zn(4))[0]=Math.max(n[0],t[0]),r[1]=Math.max(n[1],t[1]),r[2]=Math.max(n[2],t[2]),r[3]=Math.max(n[3],t[3]),r},midpoint:function(n,t,r){return In(n,t,.5,r=r||new zn(4))},min:function(n,t,r){return(r=r||new zn(4))[0]=Math.min(n[0],t[0]),r[1]=Math.min(n[1],t[1]),r[2]=Math.min(n[2],t[2]),r[3]=Math.min(n[3],t[3]),r},mul:Qn,mulScalar:Pn,multiply:Qn,negate:function(n,t){return(t=t||new zn(4))[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=-n[3],t},normalize:Xn,round:function(n,t){return(t=t||new zn(4))[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t[3]=Math.round(n[3]),t},scale:Pn,set:function(n,t,r,e,o){return(o=o||new zn(4))[0]=n,o[1]=t,o[2]=r,o[3]=e,o},setDefaultType:Fn,setLength:Nn,sub:Dn,subtract:Dn,transformMat4:function(n,t,r){r=r||new zn(4);const e=n[0],o=n[1],u=n[2],a=n[3];return r[0]=t[0]*e+t[4]*o+t[8]*u+t[12]*a,r[1]=t[1]*e+t[5]*o+t[9]*u+t[13]*a,r[2]=t[2]*e+t[6]*o+t[10]*u+t[14]*a,r[3]=t[3]*e+t[7]*o+t[11]*u+t[15]*a,r},truncate:function(n,t,r){return r=r||new zn(4),Zn(n)>t?Nn(n,t,r):Yn(n,r)},zero:function(n){return(n=n||new zn(4))[0]=0,n[1]=0,n[2]=0,n[3]=0,n}};n.mat3=I,n.mat4=cn,n.quat=Tn,n.setDefaultType=function(n){T(n),J(n),fn(n),o(n),i(n),Fn(n)},n.utils=r,n.vec2=g,n.vec3=G,n.vec4=Un}));
//# sourceMappingURL=wgpu-matrix.min.js.map
